[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building liveoak-https-redirect 1.0.0.Beta02-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ liveoak-https-redirect ---
[INFO] Deleting /home/mwringe/Projects/liveoak/modules/https-redirect/target
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-java-version) @ liveoak-https-redirect ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-maven-version) @ liveoak-https-redirect ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-maven) @ liveoak-https-redirect ---
[INFO] 
[INFO] --- build-helper-maven-plugin:1.8:regex-property (set-properties) @ liveoak-https-redirect ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create-timestamp (get-build-timestamp) @ liveoak-https-redirect ---
[INFO] 
[INFO] --- buildnumber-maven-plugin:1.3:create (get-scm-revision) @ liveoak-https-redirect ---
[INFO] Executing: /bin/sh -c cd /home/mwringe/Projects/liveoak/modules/https-redirect && git rev-parse --verify HEAD
[INFO] Working directory: /home/mwringe/Projects/liveoak/modules/https-redirect
[INFO] Storing buildNumber: 0a90660b216438c1ae3472f4e61047bb8cb7a5fc at timestamp: 1417021277690
[INFO] Storing buildScmBranch: LIVEOAK-673
[INFO] 
[INFO] --- maven-resources-plugin:2.4.2:resources (default-resources) @ liveoak-https-redirect ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ liveoak-https-redirect ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 10 source files to /home/mwringe/Projects/liveoak/modules/https-redirect/target/classes
[WARNING] /home/mwringe/Projects/liveoak/modules/https-redirect/src/main/java/io/liveoak/redirect/https/RedirectExtension.java: /home/mwringe/Projects/liveoak/modules/https-redirect/src/main/java/io/liveoak/redirect/https/RedirectExtension.java uses unchecked or unsafe operations.
[WARNING] /home/mwringe/Projects/liveoak/modules/https-redirect/src/main/java/io/liveoak/redirect/https/RedirectExtension.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-resources-plugin:2.4.2:testResources (default-testResources) @ liveoak-https-redirect ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ liveoak-https-redirect ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 3 source files to /home/mwringe/Projects/liveoak/modules/https-redirect/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.17:test (default-test) @ liveoak-https-redirect ---
[INFO] Surefire report directory: /home/mwringe/Projects/liveoak/modules/https-redirect/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running io.liveoak.redirect.https.RedirectTestCase
12:01:19,723 DEBUG [org.jboss.logging] Logging Provider: org.jboss.logging.Log4jLoggerProvider
12:01:19,841 INFO  [org.jboss.msc] JBoss MSC version 1.2.2.Final
12:01:19,936 DEBUG [io.liveoak.container.service.bootstrap.ClientBootstrappingService] bootstrap client
12:01:19,948 DEBUG [io.liveoak.container.service.ClientService] start client
12:01:19,999 DEBUG [io.netty.util.internal.logging.InternalLoggerFactory] Using Log4J as the default logging framework
12:01:20,002 DEBUG [io.netty.util.ResourceLeakDetector] -Dio.netty.leakDetectionLevel: simple
12:01:20,012 TRACE [io.liveoak.container.service.CodecInstallationCompleteService] Codec installation complete.
12:01:20,014 DEBUG [io.liveoak.container.service.LocalServerService] start local server: service liveoak.server.local.local
12:01:20,020 DEBUG [io.netty.channel.MultithreadEventLoopGroup] -Dio.netty.eventLoopThreads: 8
12:01:20,033 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: zero
12:01:20,035 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: application-clients
12:01:20,036 DEBUG [io.netty.util.internal.PlatformDependent0] java.nio.Buffer.address: available
12:01:20,037 DEBUG [io.netty.util.internal.PlatformDependent0] sun.misc.Unsafe.theUnsafe: available
12:01:20,037 DEBUG [io.netty.util.internal.PlatformDependent0] sun.misc.Unsafe.copyMemory: available
12:01:20,038 DEBUG [io.netty.util.internal.PlatformDependent0] java.nio.Bits.unaligned: true
12:01:20,046 DEBUG [io.netty.util.internal.PlatformDependent] UID: 1000
12:01:20,046 DEBUG [io.netty.util.internal.PlatformDependent] Java version: 8
12:01:20,046 DEBUG [io.netty.util.internal.PlatformDependent] -Dio.netty.noUnsafe: false
12:01:20,046 DEBUG [io.netty.util.internal.PlatformDependent] sun.misc.Unsafe: available
12:01:20,047 DEBUG [io.netty.util.internal.PlatformDependent] -Dio.netty.noJavassist: false
12:01:20,048 DEBUG [io.netty.util.internal.PlatformDependent] Javassist: unavailable
12:01:20,048 DEBUG [io.netty.util.internal.PlatformDependent] You don't have Javassist in your class path or you don't have enough permission to load dynamically generated classes.  Please check the configuration for better performance.
12:01:20,048 DEBUG [io.netty.util.internal.PlatformDependent] -Dio.netty.tmpdir: /home/mwringe/Projects/liveoak/modules/https-redirect/target (java.io.tmpdir)
12:01:20,048 DEBUG [io.netty.util.internal.PlatformDependent] -Dio.netty.bitMode: 64 (sun.arch.data.model)
12:01:20,048 DEBUG [io.netty.util.internal.PlatformDependent] -Dio.netty.noPreferDirect: false
12:01:20,067 DEBUG [io.netty.channel.nio.NioEventLoop] -Dio.netty.noKeySetOptimization: false
12:01:20,067 DEBUG [io.netty.channel.nio.NioEventLoop] -Dio.netty.selectorAutoRebuildThreshold: 512
12:01:20,115 DEBUG [io.netty.util.internal.ThreadLocalRandom] -Dio.netty.initialSeedUniquifier: 0x6386e173c2b22a94
12:01:20,128 DEBUG [io.netty.channel.ChannelOutboundBuffer] -Dio.netty.threadLocalDirectBufferSize: 65536
12:01:20,130 DEBUG [io.netty.util.Recycler] -Dio.netty.recycler.maxCapacity.default: 262144
12:01:20,172 DEBUG [io.netty.buffer.ByteBufUtil] -Dio.netty.allocator.type: unpooled
12:01:20,177 DEBUG [io.netty.util.NetUtil] Loopback interface: lo (lo, 0:0:0:0:0:0:0:1%lo)
12:01:20,178 DEBUG [io.netty.util.NetUtil] /proc/sys/net/core/somaxconn: 128
12:01:20,197 DEBUG [io.liveoak.container.service.LocalServerService] local server started
12:01:20,198 DEBUG [io.liveoak.container.service.ClientConnectorService] connect client
12:01:20,198 DEBUG [io.liveoak.client.DefaultClient] connect local client
12:01:20,211 ERROR [io.liveoak.testtools.AbstractTestCase] Controller service liveoak.application-resource.admin.system.module.application-clients.mount is in State: DOWN, Substate: PROBLEM and Mode: ACTIVE
12:01:20,211 ERROR [io.liveoak.testtools.AbstractTestCase] Controller service liveoak.zero.bootstrap.resources is in State: DOWN, Substate: PROBLEM and Mode: ACTIVE
12:01:20,211 ERROR [io.liveoak.testtools.AbstractTestCase] Controller service liveoak.application-resource.admin.system.module.zero.mount is in State: DOWN, Substate: PROBLEM and Mode: ACTIVE
12:01:20,220 DEBUG [io.liveoak.container.tenancy.service.ApplicationService] attempt to create: /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/admin
12:01:20,221 DEBUG [io.liveoak.container.tenancy.service.ApplicationService] /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/admin .mkdirs: false // true
12:01:20,347 DEBUG [io.liveoak.container.zero.service.ApplicationClientsInstallService] BOOTTIME INSTALL OF: application-clients
12:01:20,349 DEBUG [io.liveoak.container.tenancy.service.ApplicationExtensionService] ** Activate application-clients as application-clients for admin
12:01:20,370 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"admin","name":"LiveOak Administration","resources":{"application-clients":{"type":"application-clients","config":{}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/admin/application.json
12:01:20,380 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,395 DEBUG [io.liveoak.container.tenancy.service.ApplicationResourcesStartupService] application resources service: START: null
12:01:20,406 DEBUG [io.liveoak.testtools.AbstractTestCase] stable
12:01:20,407 DEBUG [io.liveoak.container.tenancy.service.ApplicationService] attempt to create: /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp
12:01:20,408 DEBUG [io.liveoak.container.tenancy.service.ApplicationService] /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp .mkdirs: false // true
12:01:20,416 DEBUG [io.liveoak.container.zero.service.ApplicationClientsInstallService] BOOTTIME INSTALL OF: application-clients
12:01:20,418 DEBUG [io.liveoak.container.tenancy.service.ApplicationExtensionService] ** Activate application-clients as application-clients for testApp
12:01:20,421 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:20,426 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,427 DEBUG [io.liveoak.container.tenancy.service.ApplicationResourcesStartupService] application resources service: START: null
CONFIG : java.util.LinkedHashMap$LinkedEntryIterator@56235b8e
12:01:20,443 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: https-redirect
12:01:20,451 DEBUG [io.liveoak.container.tenancy.service.ApplicationExtensionService] ** Activate https-redirect as https-redirect for testApp
12:01:20,455 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:20,459 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,464 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: mock
12:01:20,465 DEBUG [io.liveoak.container.tenancy.service.ApplicationExtensionService] ** Activate mock as mock for testApp
12:01:20,469 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{}},"mock":{"type":"mock","config":{}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:20,471 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,477 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: authz
12:01:20,480 DEBUG [io.liveoak.container.tenancy.service.ApplicationExtensionService] ** Activate authz as authz for testApp
12:01:20,489 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:20,495 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,536 DEBUG [io.liveoak.security.integration.AuthzServiceRootResource] Security configuration updated: AuthzServiceConfig [ policies=[AuthzPolicyEntry [ policyName=URIPolicy, includedResourcePrefixes=null, excludedResourcePrefixes=null, policyResourceEndpoint=/testApp/uri-policy/authzCheck ]] ]
12:01:20,539 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: uri-policy
12:01:20,542 DEBUG [io.liveoak.container.tenancy.service.ApplicationExtensionService] ** Activate uri-policy as uri-policy for testApp
12:01:20,548 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:20,554 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,574 DEBUG [io.liveoak.security.policy.uri.impl.URIPolicyConfigurator] Added new URIPolicyRule for resourcePath /*. Rule: URIPolicyRule [ resourcePath=/*, requestTypes=[*], rolesContainer=RolesContainer [ allowedRoles=null, deniedRoles=null, allowedUsers=[*], deniedUsers=null ] ]
12:01:20,575 DEBUG [io.liveoak.security.policy.uri.impl.URIPolicyConfigurator] Added new URIPolicyRule for resourcePath /testApp. Rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ]
12:01:20,575 DEBUG [io.liveoak.security.policy.uri.impl.URIPolicyConfigurator] Added new URIPolicyRule for resourcePath /testApp/mock/bar. Rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ]
12:01:20,575 DEBUG [io.liveoak.security.policy.uri.impl.URIPolicyConfigurator] URIPolicy configuration updated successfully
12:01:20,579 DEBUG [io.liveoak.container.extension.ExtensionService] ** Extension activated: interceptor
12:01:20,598 DEBUG [io.liveoak.container.interceptor.InterceptorManagerImpl] Interceptors configuration updated: InterceptorsConfig: {http=[InterceptorConfigEntry [interceptorName=https-redirect, resourcePathPrefix=null, requestTypeMapping=null, InterceptorConfigEntry [interceptorName=authz, resourcePathPrefix=/, requestTypeMapping=*]}
12:01:20,829 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"ALL","redirect-type":"PERMANENT","max-age":123}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:20,831 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:20,864 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:20,870 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:20,872 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:20,888 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 0][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:20,893 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:20,896 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:20,898 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:20,898 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:20,899 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:20,901 DEBUG [org.apache.http.headers] http-outgoing-0 >> GET /testApp/mock/foo HTTP/1.1
12:01:20,901 DEBUG [org.apache.http.headers] http-outgoing-0 >> X-Forwarded-Proto: http
12:01:20,901 DEBUG [org.apache.http.headers] http-outgoing-0 >> Host: localhost:8080
12:01:20,901 DEBUG [org.apache.http.headers] http-outgoing-0 >> Connection: Keep-Alive
12:01:20,901 DEBUG [org.apache.http.headers] http-outgoing-0 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:20,901 DEBUG [org.apache.http.wire] http-outgoing-0 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:20,902 DEBUG [org.apache.http.wire] http-outgoing-0 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:20,902 DEBUG [org.apache.http.wire] http-outgoing-0 >> "Host: localhost:8080[\r][\n]"
12:01:20,902 DEBUG [org.apache.http.wire] http-outgoing-0 >> "Connection: Keep-Alive[\r][\n]"
12:01:20,902 DEBUG [org.apache.http.wire] http-outgoing-0 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:20,902 DEBUG [org.apache.http.wire] http-outgoing-0 >> "[\r][\n]"
12:01:20,922 DEBUG [io.netty.util.internal.Cleaner0] java.nio.ByteBuffer.cleaner(): available
12:01:20,975 DEBUG [org.apache.http.wire] http-outgoing-0 << "HTTP/1.1 301 Moved Permanently[\r][\n]"
12:01:20,975 DEBUG [org.apache.http.wire] http-outgoing-0 << "Content-Length: 0[\r][\n]"
12:01:20,975 DEBUG [org.apache.http.wire] http-outgoing-0 << "Cache-Control: max-age=123[\r][\n]"
12:01:20,976 DEBUG [org.apache.http.wire] http-outgoing-0 << "Location: https://localhost:8080/testApp/mock/foo[\r][\n]"
12:01:20,976 DEBUG [org.apache.http.wire] http-outgoing-0 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:20,976 DEBUG [org.apache.http.wire] http-outgoing-0 << "[\r][\n]"
12:01:20,979 DEBUG [org.apache.http.headers] http-outgoing-0 << HTTP/1.1 301 Moved Permanently
12:01:20,979 DEBUG [org.apache.http.headers] http-outgoing-0 << Content-Length: 0
12:01:20,979 DEBUG [org.apache.http.headers] http-outgoing-0 << Cache-Control: max-age=123
12:01:20,979 DEBUG [org.apache.http.headers] http-outgoing-0 << Location: https://localhost:8080/testApp/mock/foo
12:01:20,979 DEBUG [org.apache.http.headers] http-outgoing-0 << Access-Control-Allow-Origin: *
12:01:20,981 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:20,991 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-0: Shutdown connection
12:01:20,992 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:20,992 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-0: Close connection
12:01:20,992 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 0][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:20,996 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:20,996 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:20,996 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:20,996 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 1][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:20,996 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:20,997 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:20,998 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:20,998 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:20,998 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:20,998 DEBUG [org.apache.http.headers] http-outgoing-1 >> GET /testApp/mock/bar HTTP/1.1
12:01:20,998 DEBUG [org.apache.http.headers] http-outgoing-1 >> X-Forwarded-Proto: http
12:01:20,999 DEBUG [org.apache.http.headers] http-outgoing-1 >> Host: localhost:8080
12:01:20,999 DEBUG [org.apache.http.headers] http-outgoing-1 >> Connection: Keep-Alive
12:01:20,999 DEBUG [org.apache.http.headers] http-outgoing-1 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:20,999 DEBUG [org.apache.http.wire] http-outgoing-1 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:20,999 DEBUG [org.apache.http.wire] http-outgoing-1 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,000 DEBUG [org.apache.http.wire] http-outgoing-1 >> "Host: localhost:8080[\r][\n]"
12:01:21,000 DEBUG [org.apache.http.wire] http-outgoing-1 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,000 DEBUG [org.apache.http.wire] http-outgoing-1 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,000 DEBUG [org.apache.http.wire] http-outgoing-1 >> "[\r][\n]"
12:01:21,004 DEBUG [org.apache.http.wire] http-outgoing-1 << "HTTP/1.1 301 Moved Permanently[\r][\n]"
12:01:21,005 DEBUG [org.apache.http.wire] http-outgoing-1 << "Content-Length: 0[\r][\n]"
12:01:21,005 DEBUG [org.apache.http.wire] http-outgoing-1 << "Cache-Control: max-age=123[\r][\n]"
12:01:21,005 DEBUG [org.apache.http.wire] http-outgoing-1 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,005 DEBUG [org.apache.http.wire] http-outgoing-1 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,005 DEBUG [org.apache.http.wire] http-outgoing-1 << "[\r][\n]"
12:01:21,005 DEBUG [org.apache.http.headers] http-outgoing-1 << HTTP/1.1 301 Moved Permanently
12:01:21,005 DEBUG [org.apache.http.headers] http-outgoing-1 << Content-Length: 0
12:01:21,005 DEBUG [org.apache.http.headers] http-outgoing-1 << Cache-Control: max-age=123
12:01:21,005 DEBUG [org.apache.http.headers] http-outgoing-1 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,005 DEBUG [org.apache.http.headers] http-outgoing-1 << Access-Control-Allow-Origin: *
12:01:21,005 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,005 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-1: Shutdown connection
12:01:21,006 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,006 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-1: Close connection
12:01:21,006 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 1][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,006 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,006 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,006 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,006 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 2][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,007 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,007 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,008 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,008 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,008 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,008 DEBUG [org.apache.http.headers] http-outgoing-2 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,008 DEBUG [org.apache.http.headers] http-outgoing-2 >> X-Forwarded-Proto: https
12:01:21,008 DEBUG [org.apache.http.headers] http-outgoing-2 >> Host: localhost:8080
12:01:21,008 DEBUG [org.apache.http.headers] http-outgoing-2 >> Connection: Keep-Alive
12:01:21,009 DEBUG [org.apache.http.headers] http-outgoing-2 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,009 DEBUG [org.apache.http.wire] http-outgoing-2 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,009 DEBUG [org.apache.http.wire] http-outgoing-2 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,009 DEBUG [org.apache.http.wire] http-outgoing-2 >> "Host: localhost:8080[\r][\n]"
12:01:21,009 DEBUG [org.apache.http.wire] http-outgoing-2 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,009 DEBUG [org.apache.http.wire] http-outgoing-2 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,009 DEBUG [org.apache.http.wire] http-outgoing-2 >> "[\r][\n]"
12:01:21,016 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 909729093, policy = /testApp/uri-policy/authzCheck
12:01:21,020 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,022 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 909729093, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,022 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 909729093, merged = ACCEPT
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "Content-Length: 90[\r][\n]"
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "Content-Type: application/json[\r][\n]"
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "[\r][\n]"
12:01:21,036 DEBUG [org.apache.http.wire] http-outgoing-2 << "{[\n]"
12:01:21,037 DEBUG [org.apache.http.wire] http-outgoing-2 << "  "id" : "foo",[\n]"
12:01:21,037 DEBUG [org.apache.http.wire] http-outgoing-2 << "  "self" : {[\n]"
12:01:21,037 DEBUG [org.apache.http.wire] http-outgoing-2 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,037 DEBUG [org.apache.http.wire] http-outgoing-2 << "  },[\n]"
12:01:21,037 DEBUG [org.apache.http.wire] http-outgoing-2 << "  "name" : "mr foo"[\n]"
12:01:21,037 DEBUG [org.apache.http.wire] http-outgoing-2 << "}"
12:01:21,037 DEBUG [org.apache.http.headers] http-outgoing-2 << HTTP/1.1 200 OK
12:01:21,037 DEBUG [org.apache.http.headers] http-outgoing-2 << Content-Length: 90
12:01:21,037 DEBUG [org.apache.http.headers] http-outgoing-2 << Location: /testApp/mock/foo
12:01:21,037 DEBUG [org.apache.http.headers] http-outgoing-2 << Content-Type: application/json
12:01:21,037 DEBUG [org.apache.http.headers] http-outgoing-2 << Access-Control-Allow-Origin: *
12:01:21,037 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,037 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-2: Shutdown connection
12:01:21,038 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,038 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-2: Close connection
12:01:21,038 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 2][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,038 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,038 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,038 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,038 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 3][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,038 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,039 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,040 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,040 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,040 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,040 DEBUG [org.apache.http.headers] http-outgoing-3 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,040 DEBUG [org.apache.http.headers] http-outgoing-3 >> X-Forwarded-Proto: https
12:01:21,040 DEBUG [org.apache.http.headers] http-outgoing-3 >> Host: localhost:8080
12:01:21,040 DEBUG [org.apache.http.headers] http-outgoing-3 >> Connection: Keep-Alive
12:01:21,040 DEBUG [org.apache.http.headers] http-outgoing-3 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,040 DEBUG [org.apache.http.wire] http-outgoing-3 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,040 DEBUG [org.apache.http.wire] http-outgoing-3 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,040 DEBUG [org.apache.http.wire] http-outgoing-3 >> "Host: localhost:8080[\r][\n]"
12:01:21,040 DEBUG [org.apache.http.wire] http-outgoing-3 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,040 DEBUG [org.apache.http.wire] http-outgoing-3 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,040 DEBUG [org.apache.http.wire] http-outgoing-3 >> "[\r][\n]"
12:01:21,044 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 2087865072, policy = /testApp/uri-policy/authzCheck
12:01:21,045 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,045 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 2087865072, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,045 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 2087865072, merged = IGNORE
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "Content-Length: 37[\r][\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "Content-Type: application/json[\r][\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "[\r][\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "{[\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,047 DEBUG [org.apache.http.wire] http-outgoing-3 << "}"
12:01:21,047 DEBUG [org.apache.http.headers] http-outgoing-3 << HTTP/1.1 401 Unauthorized
12:01:21,047 DEBUG [org.apache.http.headers] http-outgoing-3 << Content-Length: 37
12:01:21,047 DEBUG [org.apache.http.headers] http-outgoing-3 << Location: /testApp/mock/bar
12:01:21,047 DEBUG [org.apache.http.headers] http-outgoing-3 << Content-Type: application/json
12:01:21,047 DEBUG [org.apache.http.headers] http-outgoing-3 << Access-Control-Allow-Origin: *
12:01:21,048 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,048 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,048 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,048 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,048 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-3: Shutdown connection
12:01:21,048 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,048 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-3: Close connection
12:01:21,048 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 3][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,048 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,048 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,063 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"ALL","redirect-type":"TEMPORARY","max-age":10}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,064 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,065 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,065 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,065 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,066 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 4][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,066 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,066 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,067 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,068 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,068 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,068 DEBUG [org.apache.http.headers] http-outgoing-4 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,068 DEBUG [org.apache.http.headers] http-outgoing-4 >> X-Forwarded-Proto: http
12:01:21,068 DEBUG [org.apache.http.headers] http-outgoing-4 >> Host: localhost:8080
12:01:21,068 DEBUG [org.apache.http.headers] http-outgoing-4 >> Connection: Keep-Alive
12:01:21,068 DEBUG [org.apache.http.headers] http-outgoing-4 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,069 DEBUG [org.apache.http.wire] http-outgoing-4 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,069 DEBUG [org.apache.http.wire] http-outgoing-4 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,069 DEBUG [org.apache.http.wire] http-outgoing-4 >> "Host: localhost:8080[\r][\n]"
12:01:21,069 DEBUG [org.apache.http.wire] http-outgoing-4 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,069 DEBUG [org.apache.http.wire] http-outgoing-4 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,069 DEBUG [org.apache.http.wire] http-outgoing-4 >> "[\r][\n]"
12:01:21,071 DEBUG [org.apache.http.wire] http-outgoing-4 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,071 DEBUG [org.apache.http.wire] http-outgoing-4 << "Content-Length: 0[\r][\n]"
12:01:21,071 DEBUG [org.apache.http.wire] http-outgoing-4 << "Cache-Control: max-age=10[\r][\n]"
12:01:21,071 DEBUG [org.apache.http.wire] http-outgoing-4 << "Location: https://localhost:8080/testApp/mock/foo[\r][\n]"
12:01:21,071 DEBUG [org.apache.http.wire] http-outgoing-4 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,072 DEBUG [org.apache.http.wire] http-outgoing-4 << "[\r][\n]"
12:01:21,072 DEBUG [org.apache.http.headers] http-outgoing-4 << HTTP/1.1 302 Found
12:01:21,072 DEBUG [org.apache.http.headers] http-outgoing-4 << Content-Length: 0
12:01:21,072 DEBUG [org.apache.http.headers] http-outgoing-4 << Cache-Control: max-age=10
12:01:21,072 DEBUG [org.apache.http.headers] http-outgoing-4 << Location: https://localhost:8080/testApp/mock/foo
12:01:21,072 DEBUG [org.apache.http.headers] http-outgoing-4 << Access-Control-Allow-Origin: *
12:01:21,072 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,072 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-4: Shutdown connection
12:01:21,073 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,073 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-4: Close connection
12:01:21,073 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 4][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,073 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,073 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,073 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,074 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 5][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,074 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,074 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,075 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,075 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,075 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,075 DEBUG [org.apache.http.headers] http-outgoing-5 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,075 DEBUG [org.apache.http.headers] http-outgoing-5 >> X-Forwarded-Proto: http
12:01:21,075 DEBUG [org.apache.http.headers] http-outgoing-5 >> Host: localhost:8080
12:01:21,075 DEBUG [org.apache.http.headers] http-outgoing-5 >> Connection: Keep-Alive
12:01:21,075 DEBUG [org.apache.http.headers] http-outgoing-5 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,075 DEBUG [org.apache.http.wire] http-outgoing-5 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,075 DEBUG [org.apache.http.wire] http-outgoing-5 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,075 DEBUG [org.apache.http.wire] http-outgoing-5 >> "Host: localhost:8080[\r][\n]"
12:01:21,075 DEBUG [org.apache.http.wire] http-outgoing-5 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,075 DEBUG [org.apache.http.wire] http-outgoing-5 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,076 DEBUG [org.apache.http.wire] http-outgoing-5 >> "[\r][\n]"
12:01:21,078 DEBUG [org.apache.http.wire] http-outgoing-5 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,078 DEBUG [org.apache.http.wire] http-outgoing-5 << "Content-Length: 0[\r][\n]"
12:01:21,078 DEBUG [org.apache.http.wire] http-outgoing-5 << "Cache-Control: max-age=10[\r][\n]"
12:01:21,078 DEBUG [org.apache.http.wire] http-outgoing-5 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,079 DEBUG [org.apache.http.wire] http-outgoing-5 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,079 DEBUG [org.apache.http.wire] http-outgoing-5 << "[\r][\n]"
12:01:21,079 DEBUG [org.apache.http.headers] http-outgoing-5 << HTTP/1.1 302 Found
12:01:21,079 DEBUG [org.apache.http.headers] http-outgoing-5 << Content-Length: 0
12:01:21,079 DEBUG [org.apache.http.headers] http-outgoing-5 << Cache-Control: max-age=10
12:01:21,079 DEBUG [org.apache.http.headers] http-outgoing-5 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,079 DEBUG [org.apache.http.headers] http-outgoing-5 << Access-Control-Allow-Origin: *
12:01:21,079 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,080 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-5: Shutdown connection
12:01:21,080 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,080 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-5: Close connection
12:01:21,081 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 5][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,081 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,082 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,082 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,082 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 6][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,083 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,084 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,086 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,086 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,086 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,086 DEBUG [org.apache.http.headers] http-outgoing-6 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,086 DEBUG [org.apache.http.headers] http-outgoing-6 >> X-Forwarded-Proto: https
12:01:21,086 DEBUG [org.apache.http.headers] http-outgoing-6 >> Host: localhost:8080
12:01:21,086 DEBUG [org.apache.http.headers] http-outgoing-6 >> Connection: Keep-Alive
12:01:21,086 DEBUG [org.apache.http.headers] http-outgoing-6 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,086 DEBUG [org.apache.http.wire] http-outgoing-6 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,086 DEBUG [org.apache.http.wire] http-outgoing-6 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,086 DEBUG [org.apache.http.wire] http-outgoing-6 >> "Host: localhost:8080[\r][\n]"
12:01:21,086 DEBUG [org.apache.http.wire] http-outgoing-6 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,086 DEBUG [org.apache.http.wire] http-outgoing-6 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,087 DEBUG [org.apache.http.wire] http-outgoing-6 >> "[\r][\n]"
12:01:21,088 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1690901656, policy = /testApp/uri-policy/authzCheck
12:01:21,089 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,090 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1690901656, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,090 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1690901656, merged = ACCEPT
12:01:21,093 DEBUG [org.apache.http.wire] http-outgoing-6 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "Content-Length: 90[\r][\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "Content-Type: application/json[\r][\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "[\r][\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "{[\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "  "id" : "foo",[\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "  "self" : {[\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "  },[\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "  "name" : "mr foo"[\n]"
12:01:21,094 DEBUG [org.apache.http.wire] http-outgoing-6 << "}"
12:01:21,094 DEBUG [org.apache.http.headers] http-outgoing-6 << HTTP/1.1 200 OK
12:01:21,094 DEBUG [org.apache.http.headers] http-outgoing-6 << Content-Length: 90
12:01:21,094 DEBUG [org.apache.http.headers] http-outgoing-6 << Location: /testApp/mock/foo
12:01:21,094 DEBUG [org.apache.http.headers] http-outgoing-6 << Content-Type: application/json
12:01:21,094 DEBUG [org.apache.http.headers] http-outgoing-6 << Access-Control-Allow-Origin: *
12:01:21,095 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,095 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-6: Shutdown connection
12:01:21,095 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,095 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-6: Close connection
12:01:21,095 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 6][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,095 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,096 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,096 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,096 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 7][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,096 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,096 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,097 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,097 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,097 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,097 DEBUG [org.apache.http.headers] http-outgoing-7 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,097 DEBUG [org.apache.http.headers] http-outgoing-7 >> X-Forwarded-Proto: https
12:01:21,097 DEBUG [org.apache.http.headers] http-outgoing-7 >> Host: localhost:8080
12:01:21,097 DEBUG [org.apache.http.headers] http-outgoing-7 >> Connection: Keep-Alive
12:01:21,097 DEBUG [org.apache.http.headers] http-outgoing-7 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,098 DEBUG [org.apache.http.wire] http-outgoing-7 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,098 DEBUG [org.apache.http.wire] http-outgoing-7 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,098 DEBUG [org.apache.http.wire] http-outgoing-7 >> "Host: localhost:8080[\r][\n]"
12:01:21,098 DEBUG [org.apache.http.wire] http-outgoing-7 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,098 DEBUG [org.apache.http.wire] http-outgoing-7 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,098 DEBUG [org.apache.http.wire] http-outgoing-7 >> "[\r][\n]"
12:01:21,100 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1945459713, policy = /testApp/uri-policy/authzCheck
12:01:21,101 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,102 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1945459713, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,102 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1945459713, merged = IGNORE
12:01:21,103 DEBUG [org.apache.http.wire] http-outgoing-7 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,103 DEBUG [org.apache.http.wire] http-outgoing-7 << "Content-Length: 37[\r][\n]"
12:01:21,103 DEBUG [org.apache.http.wire] http-outgoing-7 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,103 DEBUG [org.apache.http.wire] http-outgoing-7 << "Content-Type: application/json[\r][\n]"
12:01:21,103 DEBUG [org.apache.http.wire] http-outgoing-7 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,104 DEBUG [org.apache.http.wire] http-outgoing-7 << "[\r][\n]"
12:01:21,104 DEBUG [org.apache.http.wire] http-outgoing-7 << "{[\n]"
12:01:21,104 DEBUG [org.apache.http.wire] http-outgoing-7 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,104 DEBUG [org.apache.http.wire] http-outgoing-7 << "}"
12:01:21,104 DEBUG [org.apache.http.headers] http-outgoing-7 << HTTP/1.1 401 Unauthorized
12:01:21,104 DEBUG [org.apache.http.headers] http-outgoing-7 << Content-Length: 37
12:01:21,104 DEBUG [org.apache.http.headers] http-outgoing-7 << Location: /testApp/mock/bar
12:01:21,104 DEBUG [org.apache.http.headers] http-outgoing-7 << Content-Type: application/json
12:01:21,104 DEBUG [org.apache.http.headers] http-outgoing-7 << Access-Control-Allow-Origin: *
12:01:21,104 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,104 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,104 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,105 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,105 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-7: Shutdown connection
12:01:21,105 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,105 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-7: Close connection
12:01:21,106 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 7][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,106 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,106 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,118 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"NONE","redirect-type":"PERMANENT","max-age":123}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,120 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,123 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,123 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,124 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,124 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 8][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,125 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,125 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,125 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,125 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,125 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,125 DEBUG [org.apache.http.headers] http-outgoing-8 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,125 DEBUG [org.apache.http.headers] http-outgoing-8 >> X-Forwarded-Proto: http
12:01:21,125 DEBUG [org.apache.http.headers] http-outgoing-8 >> Host: localhost:8080
12:01:21,125 DEBUG [org.apache.http.headers] http-outgoing-8 >> Connection: Keep-Alive
12:01:21,125 DEBUG [org.apache.http.headers] http-outgoing-8 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,125 DEBUG [org.apache.http.wire] http-outgoing-8 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,125 DEBUG [org.apache.http.wire] http-outgoing-8 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,126 DEBUG [org.apache.http.wire] http-outgoing-8 >> "Host: localhost:8080[\r][\n]"
12:01:21,126 DEBUG [org.apache.http.wire] http-outgoing-8 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,126 DEBUG [org.apache.http.wire] http-outgoing-8 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,126 DEBUG [org.apache.http.wire] http-outgoing-8 >> "[\r][\n]"
12:01:21,128 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1041658525, policy = /testApp/uri-policy/authzCheck
12:01:21,129 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,129 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1041658525, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,129 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1041658525, merged = ACCEPT
12:01:21,131 DEBUG [org.apache.http.wire] http-outgoing-8 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,131 DEBUG [org.apache.http.wire] http-outgoing-8 << "Content-Length: 90[\r][\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "Content-Type: application/json[\r][\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "[\r][\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "{[\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "  "id" : "foo",[\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "  "self" : {[\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "  },[\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "  "name" : "mr foo"[\n]"
12:01:21,132 DEBUG [org.apache.http.wire] http-outgoing-8 << "}"
12:01:21,132 DEBUG [org.apache.http.headers] http-outgoing-8 << HTTP/1.1 200 OK
12:01:21,132 DEBUG [org.apache.http.headers] http-outgoing-8 << Content-Length: 90
12:01:21,132 DEBUG [org.apache.http.headers] http-outgoing-8 << Location: /testApp/mock/foo
12:01:21,132 DEBUG [org.apache.http.headers] http-outgoing-8 << Content-Type: application/json
12:01:21,132 DEBUG [org.apache.http.headers] http-outgoing-8 << Access-Control-Allow-Origin: *
12:01:21,133 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,133 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-8: Shutdown connection
12:01:21,133 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,133 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-8: Close connection
12:01:21,133 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 8][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,135 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,135 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,135 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,135 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 9][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,136 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,136 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,137 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,137 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,137 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,137 DEBUG [org.apache.http.headers] http-outgoing-9 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,137 DEBUG [org.apache.http.headers] http-outgoing-9 >> X-Forwarded-Proto: http
12:01:21,137 DEBUG [org.apache.http.headers] http-outgoing-9 >> Host: localhost:8080
12:01:21,138 DEBUG [org.apache.http.headers] http-outgoing-9 >> Connection: Keep-Alive
12:01:21,138 DEBUG [org.apache.http.headers] http-outgoing-9 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,138 DEBUG [org.apache.http.wire] http-outgoing-9 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,138 DEBUG [org.apache.http.wire] http-outgoing-9 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,138 DEBUG [org.apache.http.wire] http-outgoing-9 >> "Host: localhost:8080[\r][\n]"
12:01:21,138 DEBUG [org.apache.http.wire] http-outgoing-9 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,138 DEBUG [org.apache.http.wire] http-outgoing-9 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,138 DEBUG [org.apache.http.wire] http-outgoing-9 >> "[\r][\n]"
12:01:21,140 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1356696165, policy = /testApp/uri-policy/authzCheck
12:01:21,141 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,141 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1356696165, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,141 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1356696165, merged = IGNORE
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "Content-Length: 37[\r][\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "Content-Type: application/json[\r][\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "[\r][\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "{[\n]"
12:01:21,143 DEBUG [org.apache.http.wire] http-outgoing-9 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,144 DEBUG [org.apache.http.wire] http-outgoing-9 << "}"
12:01:21,144 DEBUG [org.apache.http.headers] http-outgoing-9 << HTTP/1.1 401 Unauthorized
12:01:21,144 DEBUG [org.apache.http.headers] http-outgoing-9 << Content-Length: 37
12:01:21,144 DEBUG [org.apache.http.headers] http-outgoing-9 << Location: /testApp/mock/bar
12:01:21,144 DEBUG [org.apache.http.headers] http-outgoing-9 << Content-Type: application/json
12:01:21,144 DEBUG [org.apache.http.headers] http-outgoing-9 << Access-Control-Allow-Origin: *
12:01:21,144 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,144 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,144 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,144 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,148 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-9: Shutdown connection
12:01:21,149 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,150 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-9: Close connection
12:01:21,151 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 9][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,152 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,154 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,154 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,154 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 10][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,154 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,155 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,156 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,157 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,157 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,157 DEBUG [org.apache.http.headers] http-outgoing-10 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,157 DEBUG [org.apache.http.headers] http-outgoing-10 >> X-Forwarded-Proto: https
12:01:21,157 DEBUG [org.apache.http.headers] http-outgoing-10 >> Host: localhost:8080
12:01:21,157 DEBUG [org.apache.http.headers] http-outgoing-10 >> Connection: Keep-Alive
12:01:21,157 DEBUG [org.apache.http.headers] http-outgoing-10 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,157 DEBUG [org.apache.http.wire] http-outgoing-10 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,157 DEBUG [org.apache.http.wire] http-outgoing-10 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,158 DEBUG [org.apache.http.wire] http-outgoing-10 >> "Host: localhost:8080[\r][\n]"
12:01:21,158 DEBUG [org.apache.http.wire] http-outgoing-10 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,158 DEBUG [org.apache.http.wire] http-outgoing-10 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,158 DEBUG [org.apache.http.wire] http-outgoing-10 >> "[\r][\n]"
12:01:21,160 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 621817828, policy = /testApp/uri-policy/authzCheck
12:01:21,161 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,162 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 621817828, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,162 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 621817828, merged = ACCEPT
12:01:21,163 DEBUG [org.apache.http.wire] http-outgoing-10 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "Content-Length: 90[\r][\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "Content-Type: application/json[\r][\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "[\r][\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "{[\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "  "id" : "foo",[\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "  "self" : {[\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "  },[\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "  "name" : "mr foo"[\n]"
12:01:21,164 DEBUG [org.apache.http.wire] http-outgoing-10 << "}"
12:01:21,164 DEBUG [org.apache.http.headers] http-outgoing-10 << HTTP/1.1 200 OK
12:01:21,164 DEBUG [org.apache.http.headers] http-outgoing-10 << Content-Length: 90
12:01:21,164 DEBUG [org.apache.http.headers] http-outgoing-10 << Location: /testApp/mock/foo
12:01:21,164 DEBUG [org.apache.http.headers] http-outgoing-10 << Content-Type: application/json
12:01:21,164 DEBUG [org.apache.http.headers] http-outgoing-10 << Access-Control-Allow-Origin: *
12:01:21,165 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,165 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-10: Shutdown connection
12:01:21,166 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,166 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-10: Close connection
12:01:21,166 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 10][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,166 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,166 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,166 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,167 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 11][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,167 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,167 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,168 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,168 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,168 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,168 DEBUG [org.apache.http.headers] http-outgoing-11 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,168 DEBUG [org.apache.http.headers] http-outgoing-11 >> X-Forwarded-Proto: https
12:01:21,168 DEBUG [org.apache.http.headers] http-outgoing-11 >> Host: localhost:8080
12:01:21,168 DEBUG [org.apache.http.headers] http-outgoing-11 >> Connection: Keep-Alive
12:01:21,168 DEBUG [org.apache.http.headers] http-outgoing-11 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,168 DEBUG [org.apache.http.wire] http-outgoing-11 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,169 DEBUG [org.apache.http.wire] http-outgoing-11 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,169 DEBUG [org.apache.http.wire] http-outgoing-11 >> "Host: localhost:8080[\r][\n]"
12:01:21,169 DEBUG [org.apache.http.wire] http-outgoing-11 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,169 DEBUG [org.apache.http.wire] http-outgoing-11 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,169 DEBUG [org.apache.http.wire] http-outgoing-11 >> "[\r][\n]"
12:01:21,170 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 681517889, policy = /testApp/uri-policy/authzCheck
12:01:21,171 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,171 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 681517889, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,171 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 681517889, merged = IGNORE
12:01:21,172 DEBUG [org.apache.http.wire] http-outgoing-11 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,172 DEBUG [org.apache.http.wire] http-outgoing-11 << "Content-Length: 37[\r][\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "Content-Type: application/json[\r][\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "[\r][\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "{[\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,173 DEBUG [org.apache.http.wire] http-outgoing-11 << "}"
12:01:21,173 DEBUG [org.apache.http.headers] http-outgoing-11 << HTTP/1.1 401 Unauthorized
12:01:21,174 DEBUG [org.apache.http.headers] http-outgoing-11 << Content-Length: 37
12:01:21,174 DEBUG [org.apache.http.headers] http-outgoing-11 << Location: /testApp/mock/bar
12:01:21,174 DEBUG [org.apache.http.headers] http-outgoing-11 << Content-Type: application/json
12:01:21,174 DEBUG [org.apache.http.headers] http-outgoing-11 << Access-Control-Allow-Origin: *
12:01:21,174 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,174 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,174 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,174 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,175 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-11: Shutdown connection
12:01:21,175 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,175 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-11: Close connection
12:01:21,175 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 11][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,175 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,175 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,191 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"SECURED","redirect-type":"PERMANENT","max-age":123}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,196 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,198 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,198 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,198 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,198 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 12][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,198 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,199 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,199 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,199 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,200 DEBUG [org.apache.http.headers] http-outgoing-12 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,200 DEBUG [org.apache.http.headers] http-outgoing-12 >> X-Forwarded-Proto: http
12:01:21,200 DEBUG [org.apache.http.headers] http-outgoing-12 >> authorization: letmein
12:01:21,200 DEBUG [org.apache.http.headers] http-outgoing-12 >> Host: localhost:8080
12:01:21,200 DEBUG [org.apache.http.headers] http-outgoing-12 >> Connection: Keep-Alive
12:01:21,200 DEBUG [org.apache.http.headers] http-outgoing-12 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "authorization: letmein[\r][\n]"
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "Host: localhost:8080[\r][\n]"
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,200 DEBUG [org.apache.http.wire] http-outgoing-12 >> "[\r][\n]"
12:01:21,201 DEBUG [org.apache.http.wire] http-outgoing-12 << "HTTP/1.1 301 Moved Permanently[\r][\n]"
12:01:21,201 DEBUG [org.apache.http.wire] http-outgoing-12 << "Content-Length: 0[\r][\n]"
12:01:21,201 DEBUG [org.apache.http.wire] http-outgoing-12 << "Cache-Control: max-age=123[\r][\n]"
12:01:21,201 DEBUG [org.apache.http.wire] http-outgoing-12 << "Location: https://localhost:8080/testApp/mock/foo[\r][\n]"
12:01:21,201 DEBUG [org.apache.http.wire] http-outgoing-12 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,201 DEBUG [org.apache.http.wire] http-outgoing-12 << "[\r][\n]"
12:01:21,202 DEBUG [org.apache.http.headers] http-outgoing-12 << HTTP/1.1 301 Moved Permanently
12:01:21,202 DEBUG [org.apache.http.headers] http-outgoing-12 << Content-Length: 0
12:01:21,202 DEBUG [org.apache.http.headers] http-outgoing-12 << Cache-Control: max-age=123
12:01:21,202 DEBUG [org.apache.http.headers] http-outgoing-12 << Location: https://localhost:8080/testApp/mock/foo
12:01:21,202 DEBUG [org.apache.http.headers] http-outgoing-12 << Access-Control-Allow-Origin: *
12:01:21,202 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,202 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-12: Shutdown connection
12:01:21,202 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,202 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-12: Close connection
12:01:21,202 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 12][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,202 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,202 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,202 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,203 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 13][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,203 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,203 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,203 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,203 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,203 DEBUG [org.apache.http.headers] http-outgoing-13 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,203 DEBUG [org.apache.http.headers] http-outgoing-13 >> X-Forwarded-Proto: http
12:01:21,203 DEBUG [org.apache.http.headers] http-outgoing-13 >> authorization: letmein
12:01:21,203 DEBUG [org.apache.http.headers] http-outgoing-13 >> Host: localhost:8080
12:01:21,203 DEBUG [org.apache.http.headers] http-outgoing-13 >> Connection: Keep-Alive
12:01:21,203 DEBUG [org.apache.http.headers] http-outgoing-13 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,203 DEBUG [org.apache.http.wire] http-outgoing-13 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,203 DEBUG [org.apache.http.wire] http-outgoing-13 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,203 DEBUG [org.apache.http.wire] http-outgoing-13 >> "authorization: letmein[\r][\n]"
12:01:21,203 DEBUG [org.apache.http.wire] http-outgoing-13 >> "Host: localhost:8080[\r][\n]"
12:01:21,203 DEBUG [org.apache.http.wire] http-outgoing-13 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,203 DEBUG [org.apache.http.wire] http-outgoing-13 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,204 DEBUG [org.apache.http.wire] http-outgoing-13 >> "[\r][\n]"
12:01:21,204 DEBUG [org.apache.http.wire] http-outgoing-13 << "HTTP/1.1 301 Moved Permanently[\r][\n]"
12:01:21,204 DEBUG [org.apache.http.wire] http-outgoing-13 << "Content-Length: 0[\r][\n]"
12:01:21,204 DEBUG [org.apache.http.wire] http-outgoing-13 << "Cache-Control: max-age=123[\r][\n]"
12:01:21,205 DEBUG [org.apache.http.wire] http-outgoing-13 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,205 DEBUG [org.apache.http.wire] http-outgoing-13 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,205 DEBUG [org.apache.http.wire] http-outgoing-13 << "[\r][\n]"
12:01:21,205 DEBUG [org.apache.http.headers] http-outgoing-13 << HTTP/1.1 301 Moved Permanently
12:01:21,205 DEBUG [org.apache.http.headers] http-outgoing-13 << Content-Length: 0
12:01:21,205 DEBUG [org.apache.http.headers] http-outgoing-13 << Cache-Control: max-age=123
12:01:21,205 DEBUG [org.apache.http.headers] http-outgoing-13 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,205 DEBUG [org.apache.http.headers] http-outgoing-13 << Access-Control-Allow-Origin: *
12:01:21,205 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,205 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-13: Shutdown connection
12:01:21,205 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,205 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-13: Close connection
12:01:21,205 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 13][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,206 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,206 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,206 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,206 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 14][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,206 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,206 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,207 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,207 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,207 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,207 DEBUG [org.apache.http.headers] http-outgoing-14 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,207 DEBUG [org.apache.http.headers] http-outgoing-14 >> X-Forwarded-Proto: https
12:01:21,207 DEBUG [org.apache.http.headers] http-outgoing-14 >> Host: localhost:8080
12:01:21,207 DEBUG [org.apache.http.headers] http-outgoing-14 >> Connection: Keep-Alive
12:01:21,207 DEBUG [org.apache.http.headers] http-outgoing-14 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,207 DEBUG [org.apache.http.wire] http-outgoing-14 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,207 DEBUG [org.apache.http.wire] http-outgoing-14 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,207 DEBUG [org.apache.http.wire] http-outgoing-14 >> "Host: localhost:8080[\r][\n]"
12:01:21,207 DEBUG [org.apache.http.wire] http-outgoing-14 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,207 DEBUG [org.apache.http.wire] http-outgoing-14 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,207 DEBUG [org.apache.http.wire] http-outgoing-14 >> "[\r][\n]"
12:01:21,211 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 346888853, policy = /testApp/uri-policy/authzCheck
12:01:21,213 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,213 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 346888853, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,213 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 346888853, merged = ACCEPT
12:01:21,214 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 191327387, policy = /testApp/uri-policy/authzCheck
12:01:21,214 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,215 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 191327387, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,215 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 191327387, merged = ACCEPT
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "Content-Length: 90[\r][\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "Content-Type: application/json[\r][\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "[\r][\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "{[\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "  "id" : "foo",[\n]"
12:01:21,216 DEBUG [org.apache.http.wire] http-outgoing-14 << "  "self" : {[\n]"
12:01:21,217 DEBUG [org.apache.http.wire] http-outgoing-14 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,217 DEBUG [org.apache.http.wire] http-outgoing-14 << "  },[\n]"
12:01:21,217 DEBUG [org.apache.http.wire] http-outgoing-14 << "  "name" : "mr foo"[\n]"
12:01:21,217 DEBUG [org.apache.http.wire] http-outgoing-14 << "}"
12:01:21,217 DEBUG [org.apache.http.headers] http-outgoing-14 << HTTP/1.1 200 OK
12:01:21,217 DEBUG [org.apache.http.headers] http-outgoing-14 << Content-Length: 90
12:01:21,217 DEBUG [org.apache.http.headers] http-outgoing-14 << Location: /testApp/mock/foo
12:01:21,217 DEBUG [org.apache.http.headers] http-outgoing-14 << Content-Type: application/json
12:01:21,217 DEBUG [org.apache.http.headers] http-outgoing-14 << Access-Control-Allow-Origin: *
12:01:21,217 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,217 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-14: Shutdown connection
12:01:21,217 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,217 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-14: Close connection
12:01:21,217 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 14][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,218 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,218 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,219 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,219 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 15][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,219 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,220 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,221 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,221 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,221 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,222 DEBUG [org.apache.http.headers] http-outgoing-15 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,222 DEBUG [org.apache.http.headers] http-outgoing-15 >> X-Forwarded-Proto: https
12:01:21,222 DEBUG [org.apache.http.headers] http-outgoing-15 >> Host: localhost:8080
12:01:21,222 DEBUG [org.apache.http.headers] http-outgoing-15 >> Connection: Keep-Alive
12:01:21,222 DEBUG [org.apache.http.headers] http-outgoing-15 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,224 DEBUG [org.apache.http.wire] http-outgoing-15 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,224 DEBUG [org.apache.http.wire] http-outgoing-15 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,224 DEBUG [org.apache.http.wire] http-outgoing-15 >> "Host: localhost:8080[\r][\n]"
12:01:21,224 DEBUG [org.apache.http.wire] http-outgoing-15 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,224 DEBUG [org.apache.http.wire] http-outgoing-15 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,224 DEBUG [org.apache.http.wire] http-outgoing-15 >> "[\r][\n]"
12:01:21,228 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 791416092, policy = /testApp/uri-policy/authzCheck
12:01:21,229 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,230 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 791416092, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,230 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 791416092, merged = IGNORE
12:01:21,230 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 2130224787, policy = /testApp/uri-policy/authzCheck
12:01:21,231 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,231 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 2130224787, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,231 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 2130224787, merged = IGNORE
12:01:21,232 DEBUG [org.apache.http.wire] http-outgoing-15 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,232 DEBUG [org.apache.http.wire] http-outgoing-15 << "Content-Length: 37[\r][\n]"
12:01:21,232 DEBUG [org.apache.http.wire] http-outgoing-15 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,233 DEBUG [org.apache.http.wire] http-outgoing-15 << "Content-Type: application/json[\r][\n]"
12:01:21,233 DEBUG [org.apache.http.wire] http-outgoing-15 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,233 DEBUG [org.apache.http.wire] http-outgoing-15 << "[\r][\n]"
12:01:21,233 DEBUG [org.apache.http.wire] http-outgoing-15 << "{[\n]"
12:01:21,233 DEBUG [org.apache.http.wire] http-outgoing-15 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,233 DEBUG [org.apache.http.wire] http-outgoing-15 << "}"
12:01:21,233 DEBUG [org.apache.http.headers] http-outgoing-15 << HTTP/1.1 401 Unauthorized
12:01:21,233 DEBUG [org.apache.http.headers] http-outgoing-15 << Content-Length: 37
12:01:21,233 DEBUG [org.apache.http.headers] http-outgoing-15 << Location: /testApp/mock/bar
12:01:21,233 DEBUG [org.apache.http.headers] http-outgoing-15 << Content-Type: application/json
12:01:21,233 DEBUG [org.apache.http.headers] http-outgoing-15 << Access-Control-Allow-Origin: *
12:01:21,234 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,234 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,234 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,234 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,235 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-15: Shutdown connection
12:01:21,235 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,235 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-15: Close connection
12:01:21,235 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 15][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,235 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,235 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,247 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"SECURED","redirect-type":"PERMANENT","max-age":123}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,249 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,250 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,251 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,251 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,251 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 16][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,252 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,252 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,252 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,253 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,253 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,253 DEBUG [org.apache.http.headers] http-outgoing-16 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,254 DEBUG [org.apache.http.headers] http-outgoing-16 >> X-Forwarded-Proto: http
12:01:21,254 DEBUG [org.apache.http.headers] http-outgoing-16 >> Host: localhost:8080
12:01:21,254 DEBUG [org.apache.http.headers] http-outgoing-16 >> Connection: Keep-Alive
12:01:21,254 DEBUG [org.apache.http.headers] http-outgoing-16 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,254 DEBUG [org.apache.http.wire] http-outgoing-16 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,254 DEBUG [org.apache.http.wire] http-outgoing-16 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,254 DEBUG [org.apache.http.wire] http-outgoing-16 >> "Host: localhost:8080[\r][\n]"
12:01:21,254 DEBUG [org.apache.http.wire] http-outgoing-16 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,254 DEBUG [org.apache.http.wire] http-outgoing-16 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,255 DEBUG [org.apache.http.wire] http-outgoing-16 >> "[\r][\n]"
12:01:21,256 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 800410401, policy = /testApp/uri-policy/authzCheck
12:01:21,256 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,257 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 800410401, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,257 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 800410401, merged = ACCEPT
12:01:21,258 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1805067713, policy = /testApp/uri-policy/authzCheck
12:01:21,258 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,259 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1805067713, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,259 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1805067713, merged = ACCEPT
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "Content-Length: 90[\r][\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "Content-Type: application/json[\r][\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "[\r][\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "{[\n]"
12:01:21,260 DEBUG [org.apache.http.wire] http-outgoing-16 << "  "id" : "foo",[\n]"
12:01:21,261 DEBUG [org.apache.http.wire] http-outgoing-16 << "  "self" : {[\n]"
12:01:21,261 DEBUG [org.apache.http.wire] http-outgoing-16 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,261 DEBUG [org.apache.http.wire] http-outgoing-16 << "  },[\n]"
12:01:21,261 DEBUG [org.apache.http.wire] http-outgoing-16 << "  "name" : "mr foo"[\n]"
12:01:21,261 DEBUG [org.apache.http.wire] http-outgoing-16 << "}"
12:01:21,261 DEBUG [org.apache.http.headers] http-outgoing-16 << HTTP/1.1 200 OK
12:01:21,261 DEBUG [org.apache.http.headers] http-outgoing-16 << Content-Length: 90
12:01:21,261 DEBUG [org.apache.http.headers] http-outgoing-16 << Location: /testApp/mock/foo
12:01:21,261 DEBUG [org.apache.http.headers] http-outgoing-16 << Content-Type: application/json
12:01:21,261 DEBUG [org.apache.http.headers] http-outgoing-16 << Access-Control-Allow-Origin: *
12:01:21,262 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,262 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-16: Shutdown connection
12:01:21,262 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,262 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-16: Close connection
12:01:21,262 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 16][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,262 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,262 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,263 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,263 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 17][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,263 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,263 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,269 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,269 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,269 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,269 DEBUG [org.apache.http.headers] http-outgoing-17 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,269 DEBUG [org.apache.http.headers] http-outgoing-17 >> X-Forwarded-Proto: http
12:01:21,269 DEBUG [org.apache.http.headers] http-outgoing-17 >> Host: localhost:8080
12:01:21,269 DEBUG [org.apache.http.headers] http-outgoing-17 >> Connection: Keep-Alive
12:01:21,269 DEBUG [org.apache.http.headers] http-outgoing-17 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,269 DEBUG [org.apache.http.wire] http-outgoing-17 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,269 DEBUG [org.apache.http.wire] http-outgoing-17 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,270 DEBUG [org.apache.http.wire] http-outgoing-17 >> "Host: localhost:8080[\r][\n]"
12:01:21,270 DEBUG [org.apache.http.wire] http-outgoing-17 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,270 DEBUG [org.apache.http.wire] http-outgoing-17 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,270 DEBUG [org.apache.http.wire] http-outgoing-17 >> "[\r][\n]"
12:01:21,271 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1037163234, policy = /testApp/uri-policy/authzCheck
12:01:21,272 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,273 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1037163234, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,273 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1037163234, merged = IGNORE
12:01:21,274 DEBUG [org.apache.http.wire] http-outgoing-17 << "HTTP/1.1 301 Moved Permanently[\r][\n]"
12:01:21,274 DEBUG [org.apache.http.wire] http-outgoing-17 << "Content-Length: 0[\r][\n]"
12:01:21,274 DEBUG [org.apache.http.wire] http-outgoing-17 << "Cache-Control: max-age=123[\r][\n]"
12:01:21,274 DEBUG [org.apache.http.wire] http-outgoing-17 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,274 DEBUG [org.apache.http.wire] http-outgoing-17 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,274 DEBUG [org.apache.http.wire] http-outgoing-17 << "[\r][\n]"
12:01:21,275 DEBUG [org.apache.http.headers] http-outgoing-17 << HTTP/1.1 301 Moved Permanently
12:01:21,275 DEBUG [org.apache.http.headers] http-outgoing-17 << Content-Length: 0
12:01:21,275 DEBUG [org.apache.http.headers] http-outgoing-17 << Cache-Control: max-age=123
12:01:21,275 DEBUG [org.apache.http.headers] http-outgoing-17 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,275 DEBUG [org.apache.http.headers] http-outgoing-17 << Access-Control-Allow-Origin: *
12:01:21,275 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,275 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-17: Shutdown connection
12:01:21,275 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,276 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-17: Close connection
12:01:21,276 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 17][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,278 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,279 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,279 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,279 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 18][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,279 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,279 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,280 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,280 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,280 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,280 DEBUG [org.apache.http.headers] http-outgoing-18 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,280 DEBUG [org.apache.http.headers] http-outgoing-18 >> X-Forwarded-Proto: https
12:01:21,281 DEBUG [org.apache.http.headers] http-outgoing-18 >> Host: localhost:8080
12:01:21,281 DEBUG [org.apache.http.headers] http-outgoing-18 >> Connection: Keep-Alive
12:01:21,281 DEBUG [org.apache.http.headers] http-outgoing-18 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,281 DEBUG [org.apache.http.wire] http-outgoing-18 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,281 DEBUG [org.apache.http.wire] http-outgoing-18 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,281 DEBUG [org.apache.http.wire] http-outgoing-18 >> "Host: localhost:8080[\r][\n]"
12:01:21,281 DEBUG [org.apache.http.wire] http-outgoing-18 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,281 DEBUG [org.apache.http.wire] http-outgoing-18 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,281 DEBUG [org.apache.http.wire] http-outgoing-18 >> "[\r][\n]"
12:01:21,282 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1863116105, policy = /testApp/uri-policy/authzCheck
12:01:21,283 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,284 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1863116105, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,284 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1863116105, merged = ACCEPT
12:01:21,285 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1785022410, policy = /testApp/uri-policy/authzCheck
12:01:21,286 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,286 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1785022410, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,287 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1785022410, merged = ACCEPT
12:01:21,289 DEBUG [org.apache.http.wire] http-outgoing-18 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,289 DEBUG [org.apache.http.wire] http-outgoing-18 << "Content-Length: 90[\r][\n]"
12:01:21,289 DEBUG [org.apache.http.wire] http-outgoing-18 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,289 DEBUG [org.apache.http.wire] http-outgoing-18 << "Content-Type: application/json[\r][\n]"
12:01:21,289 DEBUG [org.apache.http.wire] http-outgoing-18 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,289 DEBUG [org.apache.http.wire] http-outgoing-18 << "[\r][\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "{[\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "  "id" : "foo",[\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "  "self" : {[\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "  },[\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "  "name" : "mr foo"[\n]"
12:01:21,290 DEBUG [org.apache.http.wire] http-outgoing-18 << "}"
12:01:21,290 DEBUG [org.apache.http.headers] http-outgoing-18 << HTTP/1.1 200 OK
12:01:21,290 DEBUG [org.apache.http.headers] http-outgoing-18 << Content-Length: 90
12:01:21,290 DEBUG [org.apache.http.headers] http-outgoing-18 << Location: /testApp/mock/foo
12:01:21,291 DEBUG [org.apache.http.headers] http-outgoing-18 << Content-Type: application/json
12:01:21,291 DEBUG [org.apache.http.headers] http-outgoing-18 << Access-Control-Allow-Origin: *
12:01:21,291 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,291 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-18: Shutdown connection
12:01:21,291 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,291 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-18: Close connection
12:01:21,291 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 18][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,292 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,292 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,292 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,292 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 19][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,292 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,292 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,292 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,292 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,292 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,292 DEBUG [org.apache.http.headers] http-outgoing-19 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,293 DEBUG [org.apache.http.headers] http-outgoing-19 >> X-Forwarded-Proto: https
12:01:21,293 DEBUG [org.apache.http.headers] http-outgoing-19 >> Host: localhost:8080
12:01:21,293 DEBUG [org.apache.http.headers] http-outgoing-19 >> Connection: Keep-Alive
12:01:21,293 DEBUG [org.apache.http.headers] http-outgoing-19 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,293 DEBUG [org.apache.http.wire] http-outgoing-19 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,293 DEBUG [org.apache.http.wire] http-outgoing-19 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,293 DEBUG [org.apache.http.wire] http-outgoing-19 >> "Host: localhost:8080[\r][\n]"
12:01:21,293 DEBUG [org.apache.http.wire] http-outgoing-19 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,293 DEBUG [org.apache.http.wire] http-outgoing-19 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,293 DEBUG [org.apache.http.wire] http-outgoing-19 >> "[\r][\n]"
12:01:21,296 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 940494442, policy = /testApp/uri-policy/authzCheck
12:01:21,299 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,300 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 940494442, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,300 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 940494442, merged = IGNORE
12:01:21,302 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 196805955, policy = /testApp/uri-policy/authzCheck
12:01:21,302 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,302 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 196805955, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,302 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 196805955, merged = IGNORE
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "Content-Length: 37[\r][\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "Content-Type: application/json[\r][\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "[\r][\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "{[\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,303 DEBUG [org.apache.http.wire] http-outgoing-19 << "}"
12:01:21,304 DEBUG [org.apache.http.headers] http-outgoing-19 << HTTP/1.1 401 Unauthorized
12:01:21,304 DEBUG [org.apache.http.headers] http-outgoing-19 << Content-Length: 37
12:01:21,304 DEBUG [org.apache.http.headers] http-outgoing-19 << Location: /testApp/mock/bar
12:01:21,304 DEBUG [org.apache.http.headers] http-outgoing-19 << Content-Type: application/json
12:01:21,305 DEBUG [org.apache.http.headers] http-outgoing-19 << Access-Control-Allow-Origin: *
12:01:21,305 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,305 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,305 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,305 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,306 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-19: Shutdown connection
12:01:21,306 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,307 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-19: Close connection
12:01:21,307 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 19][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,307 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,307 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,316 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"NONE","redirect-type":"TEMPORARY","max-age":10}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,317 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,318 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,318 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,318 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,318 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 20][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,318 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,319 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,319 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,319 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,319 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,319 DEBUG [org.apache.http.headers] http-outgoing-20 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,319 DEBUG [org.apache.http.headers] http-outgoing-20 >> X-Forwarded-Proto: http
12:01:21,319 DEBUG [org.apache.http.headers] http-outgoing-20 >> Host: localhost:8080
12:01:21,319 DEBUG [org.apache.http.headers] http-outgoing-20 >> Connection: Keep-Alive
12:01:21,319 DEBUG [org.apache.http.headers] http-outgoing-20 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,319 DEBUG [org.apache.http.wire] http-outgoing-20 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,319 DEBUG [org.apache.http.wire] http-outgoing-20 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,319 DEBUG [org.apache.http.wire] http-outgoing-20 >> "Host: localhost:8080[\r][\n]"
12:01:21,319 DEBUG [org.apache.http.wire] http-outgoing-20 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,319 DEBUG [org.apache.http.wire] http-outgoing-20 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,320 DEBUG [org.apache.http.wire] http-outgoing-20 >> "[\r][\n]"
12:01:21,320 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 60137424, policy = /testApp/uri-policy/authzCheck
12:01:21,321 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,321 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 60137424, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,321 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 60137424, merged = ACCEPT
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "Content-Length: 90[\r][\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "Content-Type: application/json[\r][\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "[\r][\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "{[\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "  "id" : "foo",[\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "  "self" : {[\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "  },[\n]"
12:01:21,322 DEBUG [org.apache.http.wire] http-outgoing-20 << "  "name" : "mr foo"[\n]"
12:01:21,323 DEBUG [org.apache.http.wire] http-outgoing-20 << "}"
12:01:21,323 DEBUG [org.apache.http.headers] http-outgoing-20 << HTTP/1.1 200 OK
12:01:21,323 DEBUG [org.apache.http.headers] http-outgoing-20 << Content-Length: 90
12:01:21,323 DEBUG [org.apache.http.headers] http-outgoing-20 << Location: /testApp/mock/foo
12:01:21,323 DEBUG [org.apache.http.headers] http-outgoing-20 << Content-Type: application/json
12:01:21,323 DEBUG [org.apache.http.headers] http-outgoing-20 << Access-Control-Allow-Origin: *
12:01:21,323 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,323 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-20: Shutdown connection
12:01:21,323 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,323 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-20: Close connection
12:01:21,323 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 20][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,323 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,324 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,324 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,324 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 21][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,324 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,324 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,324 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,324 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,324 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,324 DEBUG [org.apache.http.headers] http-outgoing-21 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,324 DEBUG [org.apache.http.headers] http-outgoing-21 >> X-Forwarded-Proto: http
12:01:21,324 DEBUG [org.apache.http.headers] http-outgoing-21 >> Host: localhost:8080
12:01:21,325 DEBUG [org.apache.http.headers] http-outgoing-21 >> Connection: Keep-Alive
12:01:21,325 DEBUG [org.apache.http.headers] http-outgoing-21 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,325 DEBUG [org.apache.http.wire] http-outgoing-21 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,325 DEBUG [org.apache.http.wire] http-outgoing-21 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,325 DEBUG [org.apache.http.wire] http-outgoing-21 >> "Host: localhost:8080[\r][\n]"
12:01:21,325 DEBUG [org.apache.http.wire] http-outgoing-21 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,325 DEBUG [org.apache.http.wire] http-outgoing-21 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,325 DEBUG [org.apache.http.wire] http-outgoing-21 >> "[\r][\n]"
12:01:21,326 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1125041023, policy = /testApp/uri-policy/authzCheck
12:01:21,326 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,326 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1125041023, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,326 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1125041023, merged = IGNORE
12:01:21,330 DEBUG [org.apache.http.wire] http-outgoing-21 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "Content-Length: 37[\r][\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "Content-Type: application/json[\r][\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "[\r][\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "{[\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,331 DEBUG [org.apache.http.wire] http-outgoing-21 << "}"
12:01:21,332 DEBUG [org.apache.http.headers] http-outgoing-21 << HTTP/1.1 401 Unauthorized
12:01:21,332 DEBUG [org.apache.http.headers] http-outgoing-21 << Content-Length: 37
12:01:21,332 DEBUG [org.apache.http.headers] http-outgoing-21 << Location: /testApp/mock/bar
12:01:21,332 DEBUG [org.apache.http.headers] http-outgoing-21 << Content-Type: application/json
12:01:21,332 DEBUG [org.apache.http.headers] http-outgoing-21 << Access-Control-Allow-Origin: *
12:01:21,332 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,333 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,333 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,333 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,334 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-21: Shutdown connection
12:01:21,334 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,335 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-21: Close connection
12:01:21,335 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 21][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,336 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,336 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,336 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,337 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 22][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,337 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,338 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,338 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,338 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,338 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,338 DEBUG [org.apache.http.headers] http-outgoing-22 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,338 DEBUG [org.apache.http.headers] http-outgoing-22 >> X-Forwarded-Proto: https
12:01:21,339 DEBUG [org.apache.http.headers] http-outgoing-22 >> Host: localhost:8080
12:01:21,339 DEBUG [org.apache.http.headers] http-outgoing-22 >> Connection: Keep-Alive
12:01:21,339 DEBUG [org.apache.http.headers] http-outgoing-22 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,339 DEBUG [org.apache.http.wire] http-outgoing-22 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,339 DEBUG [org.apache.http.wire] http-outgoing-22 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,339 DEBUG [org.apache.http.wire] http-outgoing-22 >> "Host: localhost:8080[\r][\n]"
12:01:21,339 DEBUG [org.apache.http.wire] http-outgoing-22 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,339 DEBUG [org.apache.http.wire] http-outgoing-22 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,339 DEBUG [org.apache.http.wire] http-outgoing-22 >> "[\r][\n]"
12:01:21,340 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 222111978, policy = /testApp/uri-policy/authzCheck
12:01:21,341 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,341 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 222111978, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,341 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 222111978, merged = ACCEPT
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "Content-Length: 90[\r][\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "Content-Type: application/json[\r][\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "[\r][\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "{[\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "  "id" : "foo",[\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "  "self" : {[\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "  },[\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "  "name" : "mr foo"[\n]"
12:01:21,343 DEBUG [org.apache.http.wire] http-outgoing-22 << "}"
12:01:21,344 DEBUG [org.apache.http.headers] http-outgoing-22 << HTTP/1.1 200 OK
12:01:21,344 DEBUG [org.apache.http.headers] http-outgoing-22 << Content-Length: 90
12:01:21,344 DEBUG [org.apache.http.headers] http-outgoing-22 << Location: /testApp/mock/foo
12:01:21,344 DEBUG [org.apache.http.headers] http-outgoing-22 << Content-Type: application/json
12:01:21,344 DEBUG [org.apache.http.headers] http-outgoing-22 << Access-Control-Allow-Origin: *
12:01:21,344 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,344 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-22: Shutdown connection
12:01:21,344 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,344 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-22: Close connection
12:01:21,344 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 22][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,344 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,344 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,344 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,345 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 23][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,345 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,345 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,345 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,345 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,345 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,345 DEBUG [org.apache.http.headers] http-outgoing-23 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,345 DEBUG [org.apache.http.headers] http-outgoing-23 >> X-Forwarded-Proto: https
12:01:21,345 DEBUG [org.apache.http.headers] http-outgoing-23 >> Host: localhost:8080
12:01:21,345 DEBUG [org.apache.http.headers] http-outgoing-23 >> Connection: Keep-Alive
12:01:21,346 DEBUG [org.apache.http.headers] http-outgoing-23 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,346 DEBUG [org.apache.http.wire] http-outgoing-23 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,346 DEBUG [org.apache.http.wire] http-outgoing-23 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,346 DEBUG [org.apache.http.wire] http-outgoing-23 >> "Host: localhost:8080[\r][\n]"
12:01:21,346 DEBUG [org.apache.http.wire] http-outgoing-23 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,346 DEBUG [org.apache.http.wire] http-outgoing-23 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,346 DEBUG [org.apache.http.wire] http-outgoing-23 >> "[\r][\n]"
12:01:21,347 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1593812243, policy = /testApp/uri-policy/authzCheck
12:01:21,348 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,348 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1593812243, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,348 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1593812243, merged = IGNORE
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "Content-Length: 37[\r][\n]"
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "Content-Type: application/json[\r][\n]"
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "[\r][\n]"
12:01:21,349 DEBUG [org.apache.http.wire] http-outgoing-23 << "{[\n]"
12:01:21,350 DEBUG [org.apache.http.wire] http-outgoing-23 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,350 DEBUG [org.apache.http.wire] http-outgoing-23 << "}"
12:01:21,350 DEBUG [org.apache.http.headers] http-outgoing-23 << HTTP/1.1 401 Unauthorized
12:01:21,350 DEBUG [org.apache.http.headers] http-outgoing-23 << Content-Length: 37
12:01:21,350 DEBUG [org.apache.http.headers] http-outgoing-23 << Location: /testApp/mock/bar
12:01:21,350 DEBUG [org.apache.http.headers] http-outgoing-23 << Content-Type: application/json
12:01:21,350 DEBUG [org.apache.http.headers] http-outgoing-23 << Access-Control-Allow-Origin: *
12:01:21,350 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,350 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,350 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,350 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,350 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-23: Shutdown connection
12:01:21,350 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,350 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-23: Close connection
12:01:21,350 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 23][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,350 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,351 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,355 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":null,"redirect-type":null,"max-age":null}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,357 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,358 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,358 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,358 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,359 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 24][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,359 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,359 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,359 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,359 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,359 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,360 DEBUG [org.apache.http.headers] http-outgoing-24 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,360 DEBUG [org.apache.http.headers] http-outgoing-24 >> X-Forwarded-Proto: http
12:01:21,360 DEBUG [org.apache.http.headers] http-outgoing-24 >> Host: localhost:8080
12:01:21,360 DEBUG [org.apache.http.headers] http-outgoing-24 >> Connection: Keep-Alive
12:01:21,360 DEBUG [org.apache.http.headers] http-outgoing-24 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,360 DEBUG [org.apache.http.wire] http-outgoing-24 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,360 DEBUG [org.apache.http.wire] http-outgoing-24 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,360 DEBUG [org.apache.http.wire] http-outgoing-24 >> "Host: localhost:8080[\r][\n]"
12:01:21,360 DEBUG [org.apache.http.wire] http-outgoing-24 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,360 DEBUG [org.apache.http.wire] http-outgoing-24 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,360 DEBUG [org.apache.http.wire] http-outgoing-24 >> "[\r][\n]"
12:01:21,363 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1908136451, policy = /testApp/uri-policy/authzCheck
12:01:21,367 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,369 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1908136451, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,369 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1908136451, merged = ACCEPT
12:01:21,371 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1151072880, policy = /testApp/uri-policy/authzCheck
12:01:21,372 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,372 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1151072880, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,372 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1151072880, merged = ACCEPT
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "Content-Length: 90[\r][\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "Content-Type: application/json[\r][\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "[\r][\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "{[\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "  "id" : "foo",[\n]"
12:01:21,373 DEBUG [org.apache.http.wire] http-outgoing-24 << "  "self" : {[\n]"
12:01:21,374 DEBUG [org.apache.http.wire] http-outgoing-24 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,374 DEBUG [org.apache.http.wire] http-outgoing-24 << "  },[\n]"
12:01:21,374 DEBUG [org.apache.http.wire] http-outgoing-24 << "  "name" : "mr foo"[\n]"
12:01:21,374 DEBUG [org.apache.http.wire] http-outgoing-24 << "}"
12:01:21,374 DEBUG [org.apache.http.headers] http-outgoing-24 << HTTP/1.1 200 OK
12:01:21,374 DEBUG [org.apache.http.headers] http-outgoing-24 << Content-Length: 90
12:01:21,374 DEBUG [org.apache.http.headers] http-outgoing-24 << Location: /testApp/mock/foo
12:01:21,374 DEBUG [org.apache.http.headers] http-outgoing-24 << Content-Type: application/json
12:01:21,374 DEBUG [org.apache.http.headers] http-outgoing-24 << Access-Control-Allow-Origin: *
12:01:21,374 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,374 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-24: Shutdown connection
12:01:21,374 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,374 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-24: Close connection
12:01:21,374 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 24][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,375 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,375 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,375 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,375 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 25][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,375 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,375 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,375 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,375 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,376 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,376 DEBUG [org.apache.http.headers] http-outgoing-25 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,376 DEBUG [org.apache.http.headers] http-outgoing-25 >> X-Forwarded-Proto: http
12:01:21,376 DEBUG [org.apache.http.headers] http-outgoing-25 >> Host: localhost:8080
12:01:21,376 DEBUG [org.apache.http.headers] http-outgoing-25 >> Connection: Keep-Alive
12:01:21,376 DEBUG [org.apache.http.headers] http-outgoing-25 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,376 DEBUG [org.apache.http.wire] http-outgoing-25 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,376 DEBUG [org.apache.http.wire] http-outgoing-25 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,376 DEBUG [org.apache.http.wire] http-outgoing-25 >> "Host: localhost:8080[\r][\n]"
12:01:21,376 DEBUG [org.apache.http.wire] http-outgoing-25 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,376 DEBUG [org.apache.http.wire] http-outgoing-25 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,376 DEBUG [org.apache.http.wire] http-outgoing-25 >> "[\r][\n]"
12:01:21,379 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 537260145, policy = /testApp/uri-policy/authzCheck
12:01:21,380 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,380 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 537260145, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,380 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 537260145, merged = IGNORE
12:01:21,380 DEBUG [org.apache.http.wire] http-outgoing-25 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,381 DEBUG [org.apache.http.wire] http-outgoing-25 << "Content-Length: 0[\r][\n]"
12:01:21,381 DEBUG [org.apache.http.wire] http-outgoing-25 << "Cache-Control: max-age=300[\r][\n]"
12:01:21,381 DEBUG [org.apache.http.wire] http-outgoing-25 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,381 DEBUG [org.apache.http.wire] http-outgoing-25 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,381 DEBUG [org.apache.http.wire] http-outgoing-25 << "[\r][\n]"
12:01:21,381 DEBUG [org.apache.http.headers] http-outgoing-25 << HTTP/1.1 302 Found
12:01:21,381 DEBUG [org.apache.http.headers] http-outgoing-25 << Content-Length: 0
12:01:21,381 DEBUG [org.apache.http.headers] http-outgoing-25 << Cache-Control: max-age=300
12:01:21,381 DEBUG [org.apache.http.headers] http-outgoing-25 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,381 DEBUG [org.apache.http.headers] http-outgoing-25 << Access-Control-Allow-Origin: *
12:01:21,381 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,381 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-25: Shutdown connection
12:01:21,381 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,381 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-25: Close connection
12:01:21,381 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 25][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,381 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,381 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,382 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,382 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 26][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,382 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,382 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,382 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,382 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,382 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,382 DEBUG [org.apache.http.headers] http-outgoing-26 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,382 DEBUG [org.apache.http.headers] http-outgoing-26 >> X-Forwarded-Proto: https
12:01:21,382 DEBUG [org.apache.http.headers] http-outgoing-26 >> Host: localhost:8080
12:01:21,382 DEBUG [org.apache.http.headers] http-outgoing-26 >> Connection: Keep-Alive
12:01:21,382 DEBUG [org.apache.http.headers] http-outgoing-26 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,382 DEBUG [org.apache.http.wire] http-outgoing-26 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,382 DEBUG [org.apache.http.wire] http-outgoing-26 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,382 DEBUG [org.apache.http.wire] http-outgoing-26 >> "Host: localhost:8080[\r][\n]"
12:01:21,382 DEBUG [org.apache.http.wire] http-outgoing-26 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,383 DEBUG [org.apache.http.wire] http-outgoing-26 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,383 DEBUG [org.apache.http.wire] http-outgoing-26 >> "[\r][\n]"
12:01:21,383 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 57740895, policy = /testApp/uri-policy/authzCheck
12:01:21,384 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,384 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 57740895, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,384 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 57740895, merged = ACCEPT
12:01:21,384 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 750102512, policy = /testApp/uri-policy/authzCheck
12:01:21,384 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,385 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 750102512, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,385 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 750102512, merged = ACCEPT
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "Content-Length: 90[\r][\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "Content-Type: application/json[\r][\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "[\r][\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "{[\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "  "id" : "foo",[\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "  "self" : {[\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "  },[\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "  "name" : "mr foo"[\n]"
12:01:21,386 DEBUG [org.apache.http.wire] http-outgoing-26 << "}"
12:01:21,386 DEBUG [org.apache.http.headers] http-outgoing-26 << HTTP/1.1 200 OK
12:01:21,386 DEBUG [org.apache.http.headers] http-outgoing-26 << Content-Length: 90
12:01:21,386 DEBUG [org.apache.http.headers] http-outgoing-26 << Location: /testApp/mock/foo
12:01:21,386 DEBUG [org.apache.http.headers] http-outgoing-26 << Content-Type: application/json
12:01:21,386 DEBUG [org.apache.http.headers] http-outgoing-26 << Access-Control-Allow-Origin: *
12:01:21,386 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,386 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-26: Shutdown connection
12:01:21,386 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,386 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-26: Close connection
12:01:21,386 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 26][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,386 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,386 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,387 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,387 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 27][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,387 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,387 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,387 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,387 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,387 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,387 DEBUG [org.apache.http.headers] http-outgoing-27 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,387 DEBUG [org.apache.http.headers] http-outgoing-27 >> X-Forwarded-Proto: https
12:01:21,387 DEBUG [org.apache.http.headers] http-outgoing-27 >> Host: localhost:8080
12:01:21,387 DEBUG [org.apache.http.headers] http-outgoing-27 >> Connection: Keep-Alive
12:01:21,387 DEBUG [org.apache.http.headers] http-outgoing-27 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,387 DEBUG [org.apache.http.wire] http-outgoing-27 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,387 DEBUG [org.apache.http.wire] http-outgoing-27 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,387 DEBUG [org.apache.http.wire] http-outgoing-27 >> "Host: localhost:8080[\r][\n]"
12:01:21,387 DEBUG [org.apache.http.wire] http-outgoing-27 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,387 DEBUG [org.apache.http.wire] http-outgoing-27 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,387 DEBUG [org.apache.http.wire] http-outgoing-27 >> "[\r][\n]"
12:01:21,388 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 929464428, policy = /testApp/uri-policy/authzCheck
12:01:21,389 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,389 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 929464428, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,389 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 929464428, merged = IGNORE
12:01:21,392 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 870816301, policy = /testApp/uri-policy/authzCheck
12:01:21,393 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,393 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 870816301, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,393 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 870816301, merged = IGNORE
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "Content-Length: 37[\r][\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "Content-Type: application/json[\r][\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "[\r][\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "{[\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,394 DEBUG [org.apache.http.wire] http-outgoing-27 << "}"
12:01:21,394 DEBUG [org.apache.http.headers] http-outgoing-27 << HTTP/1.1 401 Unauthorized
12:01:21,394 DEBUG [org.apache.http.headers] http-outgoing-27 << Content-Length: 37
12:01:21,394 DEBUG [org.apache.http.headers] http-outgoing-27 << Location: /testApp/mock/bar
12:01:21,394 DEBUG [org.apache.http.headers] http-outgoing-27 << Content-Type: application/json
12:01:21,394 DEBUG [org.apache.http.headers] http-outgoing-27 << Access-Control-Allow-Origin: *
12:01:21,394 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,395 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,395 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,395 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,396 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-27: Shutdown connection
12:01:21,397 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,397 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-27: Close connection
12:01:21,397 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 27][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,405 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"ALL","redirect-type":null,"max-age":null}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,407 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,408 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,408 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,408 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,408 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 28][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,409 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,409 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,409 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,409 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,410 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,410 DEBUG [org.apache.http.headers] http-outgoing-28 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,410 DEBUG [org.apache.http.headers] http-outgoing-28 >> X-Forwarded-Proto: http
12:01:21,410 DEBUG [org.apache.http.headers] http-outgoing-28 >> Host: localhost:8080
12:01:21,410 DEBUG [org.apache.http.headers] http-outgoing-28 >> Connection: Keep-Alive
12:01:21,410 DEBUG [org.apache.http.headers] http-outgoing-28 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,410 DEBUG [org.apache.http.wire] http-outgoing-28 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,410 DEBUG [org.apache.http.wire] http-outgoing-28 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,410 DEBUG [org.apache.http.wire] http-outgoing-28 >> "Host: localhost:8080[\r][\n]"
12:01:21,410 DEBUG [org.apache.http.wire] http-outgoing-28 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,410 DEBUG [org.apache.http.wire] http-outgoing-28 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,410 DEBUG [org.apache.http.wire] http-outgoing-28 >> "[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.wire] http-outgoing-28 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.wire] http-outgoing-28 << "Content-Length: 0[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.wire] http-outgoing-28 << "Cache-Control: max-age=300[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.wire] http-outgoing-28 << "Location: https://localhost:8080/testApp/mock/foo[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.wire] http-outgoing-28 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.wire] http-outgoing-28 << "[\r][\n]"
12:01:21,412 DEBUG [org.apache.http.headers] http-outgoing-28 << HTTP/1.1 302 Found
12:01:21,412 DEBUG [org.apache.http.headers] http-outgoing-28 << Content-Length: 0
12:01:21,412 DEBUG [org.apache.http.headers] http-outgoing-28 << Cache-Control: max-age=300
12:01:21,412 DEBUG [org.apache.http.headers] http-outgoing-28 << Location: https://localhost:8080/testApp/mock/foo
12:01:21,412 DEBUG [org.apache.http.headers] http-outgoing-28 << Access-Control-Allow-Origin: *
12:01:21,412 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,412 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-28: Shutdown connection
12:01:21,412 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,412 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-28: Close connection
12:01:21,412 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 28][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,413 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,413 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,413 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,413 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 29][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,413 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,413 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,413 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,413 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,413 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,413 DEBUG [org.apache.http.headers] http-outgoing-29 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,413 DEBUG [org.apache.http.headers] http-outgoing-29 >> X-Forwarded-Proto: http
12:01:21,413 DEBUG [org.apache.http.headers] http-outgoing-29 >> Host: localhost:8080
12:01:21,414 DEBUG [org.apache.http.headers] http-outgoing-29 >> Connection: Keep-Alive
12:01:21,414 DEBUG [org.apache.http.headers] http-outgoing-29 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,414 DEBUG [org.apache.http.wire] http-outgoing-29 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,414 DEBUG [org.apache.http.wire] http-outgoing-29 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,414 DEBUG [org.apache.http.wire] http-outgoing-29 >> "Host: localhost:8080[\r][\n]"
12:01:21,414 DEBUG [org.apache.http.wire] http-outgoing-29 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,414 DEBUG [org.apache.http.wire] http-outgoing-29 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,414 DEBUG [org.apache.http.wire] http-outgoing-29 >> "[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.wire] http-outgoing-29 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.wire] http-outgoing-29 << "Content-Length: 0[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.wire] http-outgoing-29 << "Cache-Control: max-age=300[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.wire] http-outgoing-29 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.wire] http-outgoing-29 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.wire] http-outgoing-29 << "[\r][\n]"
12:01:21,419 DEBUG [org.apache.http.headers] http-outgoing-29 << HTTP/1.1 302 Found
12:01:21,419 DEBUG [org.apache.http.headers] http-outgoing-29 << Content-Length: 0
12:01:21,419 DEBUG [org.apache.http.headers] http-outgoing-29 << Cache-Control: max-age=300
12:01:21,419 DEBUG [org.apache.http.headers] http-outgoing-29 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,419 DEBUG [org.apache.http.headers] http-outgoing-29 << Access-Control-Allow-Origin: *
12:01:21,420 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,420 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-29: Shutdown connection
12:01:21,420 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,420 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-29: Close connection
12:01:21,420 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 29][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,423 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,423 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,423 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,424 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 30][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,424 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,424 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,425 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,426 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,426 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,426 DEBUG [org.apache.http.headers] http-outgoing-30 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,426 DEBUG [org.apache.http.headers] http-outgoing-30 >> X-Forwarded-Proto: https
12:01:21,426 DEBUG [org.apache.http.headers] http-outgoing-30 >> Host: localhost:8080
12:01:21,426 DEBUG [org.apache.http.headers] http-outgoing-30 >> Connection: Keep-Alive
12:01:21,426 DEBUG [org.apache.http.headers] http-outgoing-30 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,426 DEBUG [org.apache.http.wire] http-outgoing-30 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,426 DEBUG [org.apache.http.wire] http-outgoing-30 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,426 DEBUG [org.apache.http.wire] http-outgoing-30 >> "Host: localhost:8080[\r][\n]"
12:01:21,426 DEBUG [org.apache.http.wire] http-outgoing-30 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,426 DEBUG [org.apache.http.wire] http-outgoing-30 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,426 DEBUG [org.apache.http.wire] http-outgoing-30 >> "[\r][\n]"
12:01:21,430 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 845951366, policy = /testApp/uri-policy/authzCheck
12:01:21,431 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,431 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 845951366, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,431 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 845951366, merged = ACCEPT
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "Content-Length: 90[\r][\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "Content-Type: application/json[\r][\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "[\r][\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "{[\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "  "id" : "foo",[\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "  "self" : {[\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "  },[\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "  "name" : "mr foo"[\n]"
12:01:21,433 DEBUG [org.apache.http.wire] http-outgoing-30 << "}"
12:01:21,433 DEBUG [org.apache.http.headers] http-outgoing-30 << HTTP/1.1 200 OK
12:01:21,433 DEBUG [org.apache.http.headers] http-outgoing-30 << Content-Length: 90
12:01:21,433 DEBUG [org.apache.http.headers] http-outgoing-30 << Location: /testApp/mock/foo
12:01:21,433 DEBUG [org.apache.http.headers] http-outgoing-30 << Content-Type: application/json
12:01:21,434 DEBUG [org.apache.http.headers] http-outgoing-30 << Access-Control-Allow-Origin: *
12:01:21,434 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,434 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-30: Shutdown connection
12:01:21,434 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,434 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-30: Close connection
12:01:21,434 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 30][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,434 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,434 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,434 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,435 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 31][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,435 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,435 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,435 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,435 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,435 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,436 DEBUG [org.apache.http.headers] http-outgoing-31 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,436 DEBUG [org.apache.http.headers] http-outgoing-31 >> X-Forwarded-Proto: https
12:01:21,436 DEBUG [org.apache.http.headers] http-outgoing-31 >> Host: localhost:8080
12:01:21,436 DEBUG [org.apache.http.headers] http-outgoing-31 >> Connection: Keep-Alive
12:01:21,436 DEBUG [org.apache.http.headers] http-outgoing-31 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,436 DEBUG [org.apache.http.wire] http-outgoing-31 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,436 DEBUG [org.apache.http.wire] http-outgoing-31 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,436 DEBUG [org.apache.http.wire] http-outgoing-31 >> "Host: localhost:8080[\r][\n]"
12:01:21,436 DEBUG [org.apache.http.wire] http-outgoing-31 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,436 DEBUG [org.apache.http.wire] http-outgoing-31 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,436 DEBUG [org.apache.http.wire] http-outgoing-31 >> "[\r][\n]"
12:01:21,437 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 822784583, policy = /testApp/uri-policy/authzCheck
12:01:21,438 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,439 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 822784583, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,439 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 822784583, merged = IGNORE
12:01:21,441 DEBUG [org.apache.http.wire] http-outgoing-31 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,441 DEBUG [org.apache.http.wire] http-outgoing-31 << "Content-Length: 37[\r][\n]"
12:01:21,441 DEBUG [org.apache.http.wire] http-outgoing-31 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,441 DEBUG [org.apache.http.wire] http-outgoing-31 << "Content-Type: application/json[\r][\n]"
12:01:21,441 DEBUG [org.apache.http.wire] http-outgoing-31 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,442 DEBUG [org.apache.http.wire] http-outgoing-31 << "[\r][\n]"
12:01:21,442 DEBUG [org.apache.http.wire] http-outgoing-31 << "{[\n]"
12:01:21,442 DEBUG [org.apache.http.wire] http-outgoing-31 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,442 DEBUG [org.apache.http.wire] http-outgoing-31 << "}"
12:01:21,442 DEBUG [org.apache.http.headers] http-outgoing-31 << HTTP/1.1 401 Unauthorized
12:01:21,442 DEBUG [org.apache.http.headers] http-outgoing-31 << Content-Length: 37
12:01:21,442 DEBUG [org.apache.http.headers] http-outgoing-31 << Location: /testApp/mock/bar
12:01:21,442 DEBUG [org.apache.http.headers] http-outgoing-31 << Content-Type: application/json
12:01:21,443 DEBUG [org.apache.http.headers] http-outgoing-31 << Access-Control-Allow-Origin: *
12:01:21,443 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,443 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,443 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,443 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,443 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-31: Shutdown connection
12:01:21,443 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,443 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-31: Close connection
12:01:21,443 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 31][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,443 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,444 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,450 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"SECURED","redirect-type":"TEMPORARY","max-age":10}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,451 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,452 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,452 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,452 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,452 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 32][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,452 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,452 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,453 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,453 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,453 DEBUG [org.apache.http.headers] http-outgoing-32 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,453 DEBUG [org.apache.http.headers] http-outgoing-32 >> X-Forwarded-Proto: http
12:01:21,453 DEBUG [org.apache.http.headers] http-outgoing-32 >> authorization: letmein
12:01:21,453 DEBUG [org.apache.http.headers] http-outgoing-32 >> Host: localhost:8080
12:01:21,453 DEBUG [org.apache.http.headers] http-outgoing-32 >> Connection: Keep-Alive
12:01:21,453 DEBUG [org.apache.http.headers] http-outgoing-32 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,453 DEBUG [org.apache.http.wire] http-outgoing-32 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,453 DEBUG [org.apache.http.wire] http-outgoing-32 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,453 DEBUG [org.apache.http.wire] http-outgoing-32 >> "authorization: letmein[\r][\n]"
12:01:21,453 DEBUG [org.apache.http.wire] http-outgoing-32 >> "Host: localhost:8080[\r][\n]"
12:01:21,453 DEBUG [org.apache.http.wire] http-outgoing-32 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,453 DEBUG [org.apache.http.wire] http-outgoing-32 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,454 DEBUG [org.apache.http.wire] http-outgoing-32 >> "[\r][\n]"
12:01:21,454 DEBUG [org.apache.http.wire] http-outgoing-32 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,454 DEBUG [org.apache.http.wire] http-outgoing-32 << "Content-Length: 0[\r][\n]"
12:01:21,454 DEBUG [org.apache.http.wire] http-outgoing-32 << "Cache-Control: max-age=10[\r][\n]"
12:01:21,454 DEBUG [org.apache.http.wire] http-outgoing-32 << "Location: https://localhost:8080/testApp/mock/foo[\r][\n]"
12:01:21,455 DEBUG [org.apache.http.wire] http-outgoing-32 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,455 DEBUG [org.apache.http.wire] http-outgoing-32 << "[\r][\n]"
12:01:21,455 DEBUG [org.apache.http.headers] http-outgoing-32 << HTTP/1.1 302 Found
12:01:21,455 DEBUG [org.apache.http.headers] http-outgoing-32 << Content-Length: 0
12:01:21,455 DEBUG [org.apache.http.headers] http-outgoing-32 << Cache-Control: max-age=10
12:01:21,455 DEBUG [org.apache.http.headers] http-outgoing-32 << Location: https://localhost:8080/testApp/mock/foo
12:01:21,455 DEBUG [org.apache.http.headers] http-outgoing-32 << Access-Control-Allow-Origin: *
12:01:21,455 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,455 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-32: Shutdown connection
12:01:21,455 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,455 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-32: Close connection
12:01:21,455 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 32][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,456 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,456 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,456 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,456 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 33][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,457 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,457 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,459 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,459 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,460 DEBUG [org.apache.http.headers] http-outgoing-33 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,461 DEBUG [org.apache.http.headers] http-outgoing-33 >> X-Forwarded-Proto: http
12:01:21,461 DEBUG [org.apache.http.headers] http-outgoing-33 >> authorization: letmein
12:01:21,461 DEBUG [org.apache.http.headers] http-outgoing-33 >> Host: localhost:8080
12:01:21,461 DEBUG [org.apache.http.headers] http-outgoing-33 >> Connection: Keep-Alive
12:01:21,461 DEBUG [org.apache.http.headers] http-outgoing-33 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "authorization: letmein[\r][\n]"
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "Host: localhost:8080[\r][\n]"
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,461 DEBUG [org.apache.http.wire] http-outgoing-33 >> "[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.wire] http-outgoing-33 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.wire] http-outgoing-33 << "Content-Length: 0[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.wire] http-outgoing-33 << "Cache-Control: max-age=10[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.wire] http-outgoing-33 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.wire] http-outgoing-33 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.wire] http-outgoing-33 << "[\r][\n]"
12:01:21,462 DEBUG [org.apache.http.headers] http-outgoing-33 << HTTP/1.1 302 Found
12:01:21,462 DEBUG [org.apache.http.headers] http-outgoing-33 << Content-Length: 0
12:01:21,462 DEBUG [org.apache.http.headers] http-outgoing-33 << Cache-Control: max-age=10
12:01:21,462 DEBUG [org.apache.http.headers] http-outgoing-33 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,462 DEBUG [org.apache.http.headers] http-outgoing-33 << Access-Control-Allow-Origin: *
12:01:21,462 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,463 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-33: Shutdown connection
12:01:21,463 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,463 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-33: Close connection
12:01:21,463 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 33][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,463 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,463 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,463 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,463 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 34][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,463 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,464 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,464 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,464 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,464 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,464 DEBUG [org.apache.http.headers] http-outgoing-34 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,464 DEBUG [org.apache.http.headers] http-outgoing-34 >> X-Forwarded-Proto: https
12:01:21,464 DEBUG [org.apache.http.headers] http-outgoing-34 >> Host: localhost:8080
12:01:21,464 DEBUG [org.apache.http.headers] http-outgoing-34 >> Connection: Keep-Alive
12:01:21,464 DEBUG [org.apache.http.headers] http-outgoing-34 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,464 DEBUG [org.apache.http.wire] http-outgoing-34 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,464 DEBUG [org.apache.http.wire] http-outgoing-34 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,464 DEBUG [org.apache.http.wire] http-outgoing-34 >> "Host: localhost:8080[\r][\n]"
12:01:21,464 DEBUG [org.apache.http.wire] http-outgoing-34 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,464 DEBUG [org.apache.http.wire] http-outgoing-34 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,464 DEBUG [org.apache.http.wire] http-outgoing-34 >> "[\r][\n]"
12:01:21,465 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1919037407, policy = /testApp/uri-policy/authzCheck
12:01:21,470 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,470 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1919037407, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,470 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1919037407, merged = ACCEPT
12:01:21,471 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 2103178572, policy = /testApp/uri-policy/authzCheck
12:01:21,472 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,472 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 2103178572, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,472 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 2103178572, merged = ACCEPT
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "Content-Length: 90[\r][\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "Content-Type: application/json[\r][\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "[\r][\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "{[\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "  "id" : "foo",[\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "  "self" : {[\n]"
12:01:21,474 DEBUG [org.apache.http.wire] http-outgoing-34 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,475 DEBUG [org.apache.http.wire] http-outgoing-34 << "  },[\n]"
12:01:21,475 DEBUG [org.apache.http.wire] http-outgoing-34 << "  "name" : "mr foo"[\n]"
12:01:21,475 DEBUG [org.apache.http.wire] http-outgoing-34 << "}"
12:01:21,475 DEBUG [org.apache.http.headers] http-outgoing-34 << HTTP/1.1 200 OK
12:01:21,475 DEBUG [org.apache.http.headers] http-outgoing-34 << Content-Length: 90
12:01:21,475 DEBUG [org.apache.http.headers] http-outgoing-34 << Location: /testApp/mock/foo
12:01:21,475 DEBUG [org.apache.http.headers] http-outgoing-34 << Content-Type: application/json
12:01:21,475 DEBUG [org.apache.http.headers] http-outgoing-34 << Access-Control-Allow-Origin: *
12:01:21,475 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,476 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-34: Shutdown connection
12:01:21,476 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,476 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-34: Close connection
12:01:21,476 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 34][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,477 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,477 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,477 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,477 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 35][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,477 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,478 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,478 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,478 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,478 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,479 DEBUG [org.apache.http.headers] http-outgoing-35 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,479 DEBUG [org.apache.http.headers] http-outgoing-35 >> X-Forwarded-Proto: https
12:01:21,479 DEBUG [org.apache.http.headers] http-outgoing-35 >> Host: localhost:8080
12:01:21,479 DEBUG [org.apache.http.headers] http-outgoing-35 >> Connection: Keep-Alive
12:01:21,479 DEBUG [org.apache.http.headers] http-outgoing-35 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,479 DEBUG [org.apache.http.wire] http-outgoing-35 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,479 DEBUG [org.apache.http.wire] http-outgoing-35 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,479 DEBUG [org.apache.http.wire] http-outgoing-35 >> "Host: localhost:8080[\r][\n]"
12:01:21,479 DEBUG [org.apache.http.wire] http-outgoing-35 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,479 DEBUG [org.apache.http.wire] http-outgoing-35 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,480 DEBUG [org.apache.http.wire] http-outgoing-35 >> "[\r][\n]"
12:01:21,485 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 786959200, policy = /testApp/uri-policy/authzCheck
12:01:21,487 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,487 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 786959200, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,487 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 786959200, merged = IGNORE
12:01:21,488 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1242827888, policy = /testApp/uri-policy/authzCheck
12:01:21,488 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,490 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1242827888, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,490 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1242827888, merged = IGNORE
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "Content-Length: 37[\r][\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "Content-Type: application/json[\r][\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "[\r][\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "{[\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,493 DEBUG [org.apache.http.wire] http-outgoing-35 << "}"
12:01:21,493 DEBUG [org.apache.http.headers] http-outgoing-35 << HTTP/1.1 401 Unauthorized
12:01:21,493 DEBUG [org.apache.http.headers] http-outgoing-35 << Content-Length: 37
12:01:21,493 DEBUG [org.apache.http.headers] http-outgoing-35 << Location: /testApp/mock/bar
12:01:21,493 DEBUG [org.apache.http.headers] http-outgoing-35 << Content-Type: application/json
12:01:21,493 DEBUG [org.apache.http.headers] http-outgoing-35 << Access-Control-Allow-Origin: *
12:01:21,493 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,493 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,493 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,493 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,493 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-35: Shutdown connection
12:01:21,494 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,494 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-35: Close connection
12:01:21,494 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 35][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,494 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,494 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
12:01:21,505 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] writing {"id":"testApp","name":"Test Application","resources":{"application-clients":{"type":"application-clients","config":{}},"https-redirect":{"type":"https-redirect","config":{"redirects":"SECURED","redirect-type":"TEMPORARY","max-age":10}},"mock":{"type":"mock","config":{}},"authz":{"type":"authz","config":{"policies":[{"policyName":"URIPolicy","policyResourceEndpoint":"/testApp/uri-policy/authzCheck"}]}},"uri-policy":{"type":"uri-policy","config":{"rules":[{"uriPattern":"*","requestTypes":["*"],"allowedUsers":["*"]},{"uriPattern":"/testApp*","requestTypes":["READ"],"allowedRoles":["*"]},{"uriPattern":"/testApp/mock/bar","requestTypes":["READ"],"allowedRoles":["admin"]}]}}}} to /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak6130317670916132295/testApp/application.json
12:01:21,507 DEBUG [io.liveoak.container.tenancy.ApplicationConfigurationManager] write complete
12:01:21,508 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,508 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,508 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,508 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 36][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,509 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,509 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,509 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,509 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,509 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,509 DEBUG [org.apache.http.headers] http-outgoing-36 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,509 DEBUG [org.apache.http.headers] http-outgoing-36 >> X-Forwarded-Proto: http
12:01:21,509 DEBUG [org.apache.http.headers] http-outgoing-36 >> Host: localhost:8080
12:01:21,509 DEBUG [org.apache.http.headers] http-outgoing-36 >> Connection: Keep-Alive
12:01:21,509 DEBUG [org.apache.http.headers] http-outgoing-36 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,510 DEBUG [org.apache.http.wire] http-outgoing-36 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,510 DEBUG [org.apache.http.wire] http-outgoing-36 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,510 DEBUG [org.apache.http.wire] http-outgoing-36 >> "Host: localhost:8080[\r][\n]"
12:01:21,510 DEBUG [org.apache.http.wire] http-outgoing-36 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,510 DEBUG [org.apache.http.wire] http-outgoing-36 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,510 DEBUG [org.apache.http.wire] http-outgoing-36 >> "[\r][\n]"
12:01:21,511 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 703323706, policy = /testApp/uri-policy/authzCheck
12:01:21,511 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,512 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 703323706, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,512 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 703323706, merged = ACCEPT
12:01:21,519 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 188268510, policy = /testApp/uri-policy/authzCheck
12:01:21,520 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,521 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 188268510, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,521 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 188268510, merged = ACCEPT
12:01:21,522 DEBUG [org.apache.http.wire] http-outgoing-36 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,523 DEBUG [org.apache.http.wire] http-outgoing-36 << "Content-Length: 90[\r][\n]"
12:01:21,523 DEBUG [org.apache.http.wire] http-outgoing-36 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,523 DEBUG [org.apache.http.wire] http-outgoing-36 << "Content-Type: application/json[\r][\n]"
12:01:21,523 DEBUG [org.apache.http.wire] http-outgoing-36 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,523 DEBUG [org.apache.http.wire] http-outgoing-36 << "[\r][\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "{[\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "  "id" : "foo",[\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "  "self" : {[\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "  },[\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "  "name" : "mr foo"[\n]"
12:01:21,524 DEBUG [org.apache.http.wire] http-outgoing-36 << "}"
12:01:21,525 DEBUG [org.apache.http.headers] http-outgoing-36 << HTTP/1.1 200 OK
12:01:21,525 DEBUG [org.apache.http.headers] http-outgoing-36 << Content-Length: 90
12:01:21,525 DEBUG [org.apache.http.headers] http-outgoing-36 << Location: /testApp/mock/foo
12:01:21,525 DEBUG [org.apache.http.headers] http-outgoing-36 << Content-Type: application/json
12:01:21,525 DEBUG [org.apache.http.headers] http-outgoing-36 << Access-Control-Allow-Origin: *
12:01:21,525 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,525 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-36: Shutdown connection
12:01:21,526 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,526 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-36: Close connection
12:01:21,526 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 36][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,526 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,526 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,526 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,526 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 37][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,526 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,527 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,527 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,527 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,527 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,527 DEBUG [org.apache.http.headers] http-outgoing-37 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,527 DEBUG [org.apache.http.headers] http-outgoing-37 >> X-Forwarded-Proto: http
12:01:21,527 DEBUG [org.apache.http.headers] http-outgoing-37 >> Host: localhost:8080
12:01:21,527 DEBUG [org.apache.http.headers] http-outgoing-37 >> Connection: Keep-Alive
12:01:21,527 DEBUG [org.apache.http.headers] http-outgoing-37 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,527 DEBUG [org.apache.http.wire] http-outgoing-37 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,528 DEBUG [org.apache.http.wire] http-outgoing-37 >> "X-Forwarded-Proto: http[\r][\n]"
12:01:21,528 DEBUG [org.apache.http.wire] http-outgoing-37 >> "Host: localhost:8080[\r][\n]"
12:01:21,528 DEBUG [org.apache.http.wire] http-outgoing-37 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,528 DEBUG [org.apache.http.wire] http-outgoing-37 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,528 DEBUG [org.apache.http.wire] http-outgoing-37 >> "[\r][\n]"
12:01:21,529 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 1701119698, policy = /testApp/uri-policy/authzCheck
12:01:21,532 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,533 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 1701119698, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,533 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 1701119698, merged = IGNORE
12:01:21,534 DEBUG [org.apache.http.wire] http-outgoing-37 << "HTTP/1.1 302 Found[\r][\n]"
12:01:21,535 DEBUG [org.apache.http.wire] http-outgoing-37 << "Content-Length: 0[\r][\n]"
12:01:21,535 DEBUG [org.apache.http.wire] http-outgoing-37 << "Cache-Control: max-age=10[\r][\n]"
12:01:21,535 DEBUG [org.apache.http.wire] http-outgoing-37 << "Location: https://localhost:8080/testApp/mock/bar[\r][\n]"
12:01:21,535 DEBUG [org.apache.http.wire] http-outgoing-37 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,535 DEBUG [org.apache.http.wire] http-outgoing-37 << "[\r][\n]"
12:01:21,535 DEBUG [org.apache.http.headers] http-outgoing-37 << HTTP/1.1 302 Found
12:01:21,535 DEBUG [org.apache.http.headers] http-outgoing-37 << Content-Length: 0
12:01:21,535 DEBUG [org.apache.http.headers] http-outgoing-37 << Cache-Control: max-age=10
12:01:21,535 DEBUG [org.apache.http.headers] http-outgoing-37 << Location: https://localhost:8080/testApp/mock/bar
12:01:21,536 DEBUG [org.apache.http.headers] http-outgoing-37 << Access-Control-Allow-Origin: *
12:01:21,536 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,536 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-37: Shutdown connection
12:01:21,536 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,537 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-37: Close connection
12:01:21,537 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 37][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,537 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,537 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,537 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,537 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 38][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,537 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,538 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,538 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/foo HTTP/1.1
12:01:21,538 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,538 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,538 DEBUG [org.apache.http.headers] http-outgoing-38 >> GET /testApp/mock/foo HTTP/1.1
12:01:21,538 DEBUG [org.apache.http.headers] http-outgoing-38 >> X-Forwarded-Proto: https
12:01:21,539 DEBUG [org.apache.http.headers] http-outgoing-38 >> Host: localhost:8080
12:01:21,539 DEBUG [org.apache.http.headers] http-outgoing-38 >> Connection: Keep-Alive
12:01:21,539 DEBUG [org.apache.http.headers] http-outgoing-38 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,539 DEBUG [org.apache.http.wire] http-outgoing-38 >> "GET /testApp/mock/foo HTTP/1.1[\r][\n]"
12:01:21,539 DEBUG [org.apache.http.wire] http-outgoing-38 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,539 DEBUG [org.apache.http.wire] http-outgoing-38 >> "Host: localhost:8080[\r][\n]"
12:01:21,539 DEBUG [org.apache.http.wire] http-outgoing-38 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,539 DEBUG [org.apache.http.wire] http-outgoing-38 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,539 DEBUG [org.apache.http.wire] http-outgoing-38 >> "[\r][\n]"
12:01:21,540 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 259580290, policy = /testApp/uri-policy/authzCheck
12:01:21,541 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,541 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 259580290, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,541 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 259580290, merged = ACCEPT
12:01:21,542 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 2014700633, policy = /testApp/uri-policy/authzCheck
12:01:21,543 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/foo, rule: URIPolicyRule [ resourcePath=/testApp/testApp*, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[*], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: ACCEPT
12:01:21,543 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 2014700633, policy = /testApp/uri-policy/authzCheck, result = ACCEPT, merged = ACCEPT
12:01:21,543 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 2014700633, merged = ACCEPT
12:01:21,548 DEBUG [org.apache.http.wire] http-outgoing-38 << "HTTP/1.1 200 OK[\r][\n]"
12:01:21,548 DEBUG [org.apache.http.wire] http-outgoing-38 << "Content-Length: 90[\r][\n]"
12:01:21,548 DEBUG [org.apache.http.wire] http-outgoing-38 << "Location: /testApp/mock/foo[\r][\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "Content-Type: application/json[\r][\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "[\r][\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "{[\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "  "id" : "foo",[\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "  "self" : {[\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "    "href" : "/testApp/mock/foo"[\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "  },[\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "  "name" : "mr foo"[\n]"
12:01:21,549 DEBUG [org.apache.http.wire] http-outgoing-38 << "}"
12:01:21,550 DEBUG [org.apache.http.headers] http-outgoing-38 << HTTP/1.1 200 OK
12:01:21,550 DEBUG [org.apache.http.headers] http-outgoing-38 << Content-Length: 90
12:01:21,550 DEBUG [org.apache.http.headers] http-outgoing-38 << Location: /testApp/mock/foo
12:01:21,550 DEBUG [org.apache.http.headers] http-outgoing-38 << Content-Type: application/json
12:01:21,550 DEBUG [org.apache.http.headers] http-outgoing-38 << Access-Control-Allow-Origin: *
12:01:21,550 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,551 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-38: Shutdown connection
12:01:21,551 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,552 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-38: Close connection
12:01:21,552 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 38][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,554 DEBUG [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: best-match
12:01:21,555 DEBUG [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context
12:01:21,555 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,556 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 39][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]
12:01:21,556 DEBUG [org.apache.http.impl.execchain.MainClientExec] Opening connection {}->http://localhost:8080
12:01:21,557 DEBUG [org.apache.http.conn.HttpClientConnectionManager] Connecting to localhost/127.0.0.1:8080
12:01:21,558 DEBUG [org.apache.http.impl.execchain.MainClientExec] Executing request GET /testApp/mock/bar HTTP/1.1
12:01:21,558 DEBUG [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED
12:01:21,558 DEBUG [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED
12:01:21,559 DEBUG [org.apache.http.headers] http-outgoing-39 >> GET /testApp/mock/bar HTTP/1.1
12:01:21,559 DEBUG [org.apache.http.headers] http-outgoing-39 >> X-Forwarded-Proto: https
12:01:21,559 DEBUG [org.apache.http.headers] http-outgoing-39 >> Host: localhost:8080
12:01:21,559 DEBUG [org.apache.http.headers] http-outgoing-39 >> Connection: Keep-Alive
12:01:21,559 DEBUG [org.apache.http.headers] http-outgoing-39 >> User-Agent: Apache-HttpClient/4.3 (java 1.5)
12:01:21,559 DEBUG [org.apache.http.wire] http-outgoing-39 >> "GET /testApp/mock/bar HTTP/1.1[\r][\n]"
12:01:21,559 DEBUG [org.apache.http.wire] http-outgoing-39 >> "X-Forwarded-Proto: https[\r][\n]"
12:01:21,559 DEBUG [org.apache.http.wire] http-outgoing-39 >> "Host: localhost:8080[\r][\n]"
12:01:21,559 DEBUG [org.apache.http.wire] http-outgoing-39 >> "Connection: Keep-Alive[\r][\n]"
12:01:21,559 DEBUG [org.apache.http.wire] http-outgoing-39 >> "User-Agent: Apache-HttpClient/4.3 (java 1.5)[\r][\n]"
12:01:21,559 DEBUG [org.apache.http.wire] http-outgoing-39 >> "[\r][\n]"
12:01:21,561 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 907899594, policy = /testApp/uri-policy/authzCheck
12:01:21,561 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,562 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 907899594, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,562 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 907899594, merged = IGNORE
12:01:21,562 TRACE [io.liveoak.security.integration.AuthzCheckResource] Invoking next policy for 2072228173, policy = /testApp/uri-policy/authzCheck
12:01:21,563 TRACE [io.liveoak.security.policy.uri.impl.URIPolicy] Checking resourcePath: /testApp/mock/bar, rule: URIPolicyRule [ resourcePath=/testApp/mock/bar, requestTypes=[READ], rolesContainer=RolesContainer [ allowedRoles=[admin], deniedRoles=null, allowedUsers=null, deniedUsers=null ] ], result: IGNORE
12:01:21,563 TRACE [io.liveoak.security.integration.AuthzCheckResource] Policy response for 2072228173, policy = /testApp/uri-policy/authzCheck, result = IGNORE, merged = IGNORE
12:01:21,563 TRACE [io.liveoak.security.integration.AuthzCheckResource] Completed for 2072228173, merged = IGNORE
12:01:21,565 DEBUG [org.apache.http.wire] http-outgoing-39 << "HTTP/1.1 401 Unauthorized[\r][\n]"
12:01:21,565 DEBUG [org.apache.http.wire] http-outgoing-39 << "Content-Length: 37[\r][\n]"
12:01:21,565 DEBUG [org.apache.http.wire] http-outgoing-39 << "Location: /testApp/mock/bar[\r][\n]"
12:01:21,566 DEBUG [org.apache.http.wire] http-outgoing-39 << "Content-Type: application/json[\r][\n]"
12:01:21,566 DEBUG [org.apache.http.wire] http-outgoing-39 << "Access-Control-Allow-Origin: *[\r][\n]"
12:01:21,566 DEBUG [org.apache.http.wire] http-outgoing-39 << "[\r][\n]"
12:01:21,566 DEBUG [org.apache.http.wire] http-outgoing-39 << "{[\n]"
12:01:21,566 DEBUG [org.apache.http.wire] http-outgoing-39 << "  "error-type" : "NOT_AUTHORIZED"[\n]"
12:01:21,566 DEBUG [org.apache.http.wire] http-outgoing-39 << "}"
12:01:21,566 DEBUG [org.apache.http.headers] http-outgoing-39 << HTTP/1.1 401 Unauthorized
12:01:21,566 DEBUG [org.apache.http.headers] http-outgoing-39 << Content-Length: 37
12:01:21,566 DEBUG [org.apache.http.headers] http-outgoing-39 << Location: /testApp/mock/bar
12:01:21,566 DEBUG [org.apache.http.headers] http-outgoing-39 << Content-Type: application/json
12:01:21,567 DEBUG [org.apache.http.headers] http-outgoing-39 << Access-Control-Allow-Origin: *
12:01:21,567 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely
12:01:21,567 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Authentication required
12:01:21,567 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] localhost:8080 requested authentication
12:01:21,567 DEBUG [org.apache.http.impl.auth.HttpAuthenticator] Response contains no authentication challenges
12:01:21,567 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-39: Shutdown connection
12:01:21,568 DEBUG [org.apache.http.impl.execchain.MainClientExec] Connection discarded
12:01:21,568 DEBUG [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-39: Close connection
12:01:21,568 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 39][route: {}->http://localhost:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]
12:01:21,568 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager is shutting down
12:01:21,568 DEBUG [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection manager shut down
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.222 sec - in io.liveoak.redirect.https.RedirectTestCase

Results :

Tests run: 9, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-jar-plugin:2.5:jar (default-jar) @ liveoak-https-redirect ---
[INFO] Building jar: /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-assembly-plugin:2.4:single (assemble-module) @ liveoak-https-redirect ---
[INFO] Copying files to /home/mwringe/Projects/liveoak/modules/target/modules/io/liveoak/redirect/https/main
[WARNING] Assembly file: /home/mwringe/Projects/liveoak/modules/target/modules/io/liveoak/redirect/https/main is not a regular file (it may be a directory). It cannot be attached to the project build for installation or deployment.
[INFO] 
[INFO] --- maven-source-plugin:2.3:jar-no-fork (attach-sources) @ liveoak-https-redirect ---
[INFO] Building jar: /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT-sources.jar
[INFO] 
[INFO] --- maven-install-plugin:2.5.1:install (default-install) @ liveoak-https-redirect ---
[INFO] Installing /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT.jar to /home/mwringe/.m2/repository/io/liveoak/liveoak-https-redirect/1.0.0.Beta02-SNAPSHOT/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT.jar
[INFO] Installing /home/mwringe/Projects/liveoak/modules/https-redirect/pom.xml to /home/mwringe/.m2/repository/io/liveoak/liveoak-https-redirect/1.0.0.Beta02-SNAPSHOT/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT.pom
[INFO] Installing /home/mwringe/Projects/liveoak/modules/https-redirect/target/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT-sources.jar to /home/mwringe/.m2/repository/io/liveoak/liveoak-https-redirect/1.0.0.Beta02-SNAPSHOT/liveoak-https-redirect-1.0.0.Beta02-SNAPSHOT-sources.jar
[INFO] 
[INFO] --- maven-assembly-plugin:2.4:single (assemble-m2-repo) @ liveoak-https-redirect ---
[INFO] Copying files to /home/mwringe/Projects/liveoak/modules/target/m2-repo
[WARNING] Assembly file: /home/mwringe/Projects/liveoak/modules/target/m2-repo is not a regular file (it may be a directory). It cannot be attached to the project build for installation or deployment.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.176s
[INFO] Finished at: Wed Nov 26 12:01:25 EST 2014
[INFO] Final Memory: 27M/377M
[INFO] ------------------------------------------------------------------------
